{
  "version": 3,
  "sources": ["../bundle-dWNqiD/checked-fetch.js", "../../../node_modules/src/src/Router.ts", "../../../node_modules/src/src/StatusError.ts", "../../../node_modules/src/src/createResponse.ts", "../../../node_modules/src/src/json.ts", "../../../node_modules/src/src/error.ts", "../../../node_modules/src/src/status.ts", "../../../node_modules/src/src/text.ts", "../../../node_modules/src/src/html.ts", "../../../node_modules/src/src/jpeg.ts", "../../../node_modules/src/src/png.ts", "../../../node_modules/src/src/webp.ts", "../../../node_modules/src/src/withContent.ts", "../../../node_modules/src/src/withCookies.ts", "../../../node_modules/src/src/withParams.ts", "../../../node_modules/src/src/createCors.ts", "../../../src/utils/github.js", "../../../src/handlers/public.js", "../../../src/handlers/auth.js", "../../../src/handlers/admin.js", "../../../src/handlers/build.js", "../../../src/index.js", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-dWNqiD/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-dWNqiD/middleware-loader.entry.ts"],
  "sourceRoot": "/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/.wrangler/tmp/dev-XtaxM0",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "// GitHub utilities - direct authentication using environment variables\n// No external dependencies, everything is self-contained\n\n// Function to create safe filenames from theme names\nfunction createSafeFilename(themeName) {\n    return themeName\n        .toLowerCase()\n        .replace(/[^a-z0-9\\s-]/g, '') // Remove special characters\n        .replace(/\\s+/g, '-')         // Replace spaces with hyphens\n        .replace(/-+/g, '-')          // Remove duplicate hyphens\n        .replace(/^-+|-+$/g, '') || 'untitled-theme'; // Remove leading/trailing hyphens\n}\n\n// Helper function to get authenticated headers for GitHub API calls\nfunction getGitHubHeaders(env) {\n    if (!env.GITHUB_TOKEN) {\n        throw new Error('No GitHub authentication configuration found. Please configure GITHUB_TOKEN in wrangler.toml');\n    }\n\n    console.log('\uD83D\uDD11 Using personal token authentication...');\n    return {\n        'Authorization': `Bearer ${env.GITHUB_TOKEN}`,\n        'User-Agent': 'ThemeHub',\n        'Accept': 'application/vnd.github.v3+json'\n    };\n}\n\n// Helper function to get the branch name\nfunction getBranch(env) {\n    return env.GITHUB_BRANCH || 'main';\n}\n\n// Save theme to GitHub with human-readable names\nexport async function saveThemeToGitHub(env, theme, status = 'pending', customFilename) {\n    try {\n        // Validate configuration\n        if (!env.GITHUB_TOKEN) {\n            throw new Error('No GitHub authentication configuration found. Please configure GITHUB_TOKEN in wrangler.toml');\n        }\n\n        const owner = env.GITHUB_OWNER;\n        const repo = env.GITHUB_REPO;\n\n        // Create safe filename from theme name with timestamp (or use provided)\n        const safeName = createSafeFilename(theme.name);\n        const timestamp = Date.now();\n        const filename = customFilename || `${safeName}-${timestamp}`;\n        const path = `themes/${status}/${filename}.json`;\n\n        // Handle preview image if provided\n        if (theme.previewImage) {\n            // Save preview image separately\n            const previewPath = `themes/${status}/${filename}-preview.png`;\n            const previewUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${previewPath}`;\n\n            // theme.previewImage expected format: \"mime;base64,<data>\"\n            const encodedImageData = theme.previewImage.replace(/^.*base64,/, '');\n\n            // Save preview image\n            const headers = getGitHubHeaders(env);\n            headers['Content-Type'] = 'application/json';\n\n            const branch = getBranch(env);\n\n            await fetch(previewUrl, {\n                method: 'PUT',\n                headers: headers,\n                body: JSON.stringify({\n                    message: `Add ${status} theme preview: ${theme.name}`,\n                    content: encodedImageData,\n                    branch: branch\n                })\n            });\n\n            // Add preview URL to theme data\n            theme.previewUrl = `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${previewPath}`;\n\n            // Remove base64 data to keep JSON clean\n            delete theme.previewImage;\n        }\n\n        const content = JSON.stringify(theme, null, 2);\n        const encodedContent = btoa(content);\n\n        const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\n\n        const headers = getGitHubHeaders(env);\n        headers['Content-Type'] = 'application/json';\n\n        const response = await fetch(url, {\n            method: 'PUT',\n            headers: headers,\n            body: JSON.stringify({\n                message: `Add ${status} theme: ${theme.name || filename}`,\n                content: encodedContent,\n                branch: getBranch(env)\n            })\n        });\n\n        if (response.ok) {\n            return filename; // Return the filename (without .json)\n        } else {\n            const errorText = await response.text();\n            console.error('GitHub API Error:', response.status, errorText);\n            return null;\n        }\n    } catch (error) {\n        console.error('GitHub Save Error:', error);\n        return null;\n    }\n}\n\n// Get all themes from GitHub\nexport async function getAllThemesFromGitHub(env, status = 'approved') {\n    try {\n        // Validate configuration\n        if (!env.GITHUB_TOKEN) {\n            throw new Error('No GitHub authentication configuration found. Please configure GITHUB_TOKEN in wrangler.toml');\n        }\n\n        const owner = env.GITHUB_OWNER;\n        const repo = env.GITHUB_REPO;\n        const path = `themes/${status}/`;\n\n        const branch = getBranch(env);\n        const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`;\n\n        const headers = getGitHubHeaders(env);\n        const response = await fetch(url, {\n            headers: headers\n        });\n\n        if (!response.ok) {\n            const errText = await response.text();\n            console.error('List themes error:', response.status, errText);\n            return [];\n        }\n\n        const files = await response.json();\n        if (!Array.isArray(files)) {\n            console.error('Unexpected list response shape for', path);\n            return [];\n        }\n\n        const themes = [];\n\n        // Process only JSON files\n        for (const file of files) {\n            if (file.type === 'file' && file.name.endsWith('.json') && !file.name.includes('-preview')) {\n                try {\n                    // Fetch the actual theme data\n                    const themeResponse = await fetch(file.download_url);\n                    const themeData = await themeResponse.json();\n                    const themeId = file.name.replace('.json', '');\n\n                    themes.push({\n                        id: themeId,           // This is the filename without .json\n                        filename: file.name,   // Keep original filename for reference\n                        ...themeData\n                    });\n                } catch (error) {\n                    console.error('Error loading theme:', file.name, error);\n                }\n            }\n        }\n\n        return themes;\n    } catch (error) {\n        console.error('GitHub List Error:', error);\n        return [];\n    }\n}\n\n// Get specific theme from GitHub\nexport async function getThemeFromGitHub(env, themeId, status = 'approved') {\n    try {\n        // Validate configuration\n        if (!env.GITHUB_TOKEN) {\n            throw new Error('No GitHub authentication configuration found. Please configure GITHUB_TOKEN in wrangler.toml');\n        }\n\n        const owner = env.GITHUB_OWNER;\n        const repo = env.GITHUB_REPO;\n        const safeId = encodeURIComponent(themeId);\n        const path = `themes/${status}/${safeId}.json`;\n\n        const branch = getBranch(env);\n        const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`;\n\n        const headers = getGitHubHeaders(env);\n        const response = await fetch(url, {\n            headers: headers\n        });\n\n        if (!response.ok) {\n            if (response.status === 404) {\n                console.warn('Theme not found at', path);\n            }\n            return null;\n        }\n\n        const file = await response.json();\n        const themeResponse = await fetch(file.download_url);\n        const themeData = await themeResponse.json();\n\n        return {\n            id: themeId,\n            filename: file.name,\n            ...themeData\n        };\n    } catch (error) {\n        console.error('GitHub Get Theme Error:', error);\n        return null;\n    }\n}\n\n// Move theme between statuses (approve/reject)\nexport async function moveThemeBetweenStatuses(env, themeId, fromStatus, toStatus) {\n    try {\n        console.log(`\uD83D\uDD04 Moving theme ${themeId} from ${fromStatus} to ${toStatus}...`);\n\n        // Validate configuration\n        if (!env.GITHUB_TOKEN) {\n            throw new Error('No GitHub authentication configuration found. Please configure GITHUB_TOKEN in wrangler.toml');\n        }\n\n        const owner = env.GITHUB_OWNER;\n        const repo = env.GITHUB_REPO;\n\n        // Get the theme content\n        const theme = await getThemeFromGitHub(env, themeId, fromStatus);\n        if (!theme) {\n            return false;\n        }\n\n        // Preserve original filename (without .json)\n        const originalFilename = theme.filename ? theme.filename.replace(/\\.json$/, '') : themeId;\n\n        // Copy preview if exists\n        const fromPreviewPath = `themes/${fromStatus}/${originalFilename}-preview.png`;\n        const toPreviewPath = `themes/${toStatus}/${originalFilename}-preview.png`;\n\n        // Try to read preview (if exists) and write to new location\n        try {\n            const branch = getBranch(env);\n            const fileInfoUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${fromPreviewPath}?ref=${branch}`;\n            const headers = getGitHubHeaders(env);\n            const fileInfoResponse = await fetch(fileInfoUrl, {\n                headers: headers\n            });\n            if (fileInfoResponse.ok) {\n                const fileInfo = await fileInfoResponse.json();\n                const previewContentResponse = await fetch(fileInfo.download_url);\n                const previewArrayBuffer = await previewContentResponse.arrayBuffer();\n                const u8 = new Uint8Array(previewArrayBuffer);\n                // Encode to base64\n                let binary = '';\n                const chunkSize = 0x8000;\n                for (let i = 0; i < u8.length; i += chunkSize) {\n                    const chunk = u8.subarray(i, i + chunkSize);\n                    binary += String.fromCharCode.apply(null, chunk);\n                }\n                const encoded = btoa(binary);\n\n                const toPreviewUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${toPreviewPath}`;\n                const putHeaders = getGitHubHeaders(env);\n                putHeaders['Content-Type'] = 'application/json';\n\n                await fetch(toPreviewUrl, {\n                    method: 'PUT',\n                    headers: putHeaders,\n                    body: JSON.stringify({\n                        message: `Copy preview to ${toStatus}: ${originalFilename}`,\n                        content: encoded,\n                        branch: getBranch(env)\n                    })\n                });\n\n                // Update previewUrl in theme\n                theme.previewUrl = `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${toPreviewPath}`;\n\n                // Delete old preview\n                const oldPreviewDeleteUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${fromPreviewPath}`;\n                const deleteHeaders = getGitHubHeaders(env);\n                deleteHeaders['Content-Type'] = 'application/json';\n\n                await fetch(oldPreviewDeleteUrl, {\n                    method: 'DELETE',\n                    headers: deleteHeaders,\n                    body: JSON.stringify({\n                        message: `Delete ${fromStatus} theme preview: ${originalFilename}`,\n                        sha: fileInfo.sha,\n                        branch: getBranch(env)\n                    })\n                });\n            }\n        } catch (previewErr) {\n            // No preview or copy error \u2013 ignore but log\n            console.error('Preview copy error (continuing):', previewErr);\n        }\n\n        // Save to new location under the same filename\n        const newThemeId = await saveThemeToGitHub(env, theme, toStatus, originalFilename);\n        if (!newThemeId) {\n            return false;\n        }\n\n        // Delete from old location (JSON only, preview handled above)\n        const deleteSuccess = await deleteThemeFromGitHub(env, themeId, fromStatus);\n\n        if (deleteSuccess) {\n            console.log(`\u2705 Successfully moved theme ${themeId} from ${fromStatus} to ${toStatus}`);\n        } else {\n            console.error(`\u274C Failed to delete theme ${themeId} from ${fromStatus} after move`);\n        }\n\n        return deleteSuccess;\n    } catch (error) {\n        console.error('Move Error:', error);\n        return false;\n    }\n}\n\n// Delete theme from GitHub with better error handling\nexport async function deleteThemeFromGitHub(env, themeId, status) {\n    try {\n        // Validate configuration\n        if (!env.GITHUB_TOKEN) {\n            throw new Error('No GitHub authentication configuration found. Please configure GITHUB_TOKEN in wrangler.toml');\n        }\n\n        const owner = env.GITHUB_OWNER;\n        const repo = env.GITHUB_REPO;\n        const path = `themes/${status}/${themeId}.json`;\n\n        // First get the file SHA\n        const branch = getBranch(env);\n        const fileInfoUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}?ref=${branch}`;\n        const headers = getGitHubHeaders(env);\n        const fileInfoResponse = await fetch(fileInfoUrl, {\n            headers: headers\n        });\n\n        if (!fileInfoResponse.ok) {\n            console.error('File not found for deletion:', path);\n            // Treat as already deleted\n            return true;\n        }\n\n        const fileInfo = await fileInfoResponse.json();\n\n        // Delete the JSON file\n        const deleteUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;\n        const deleteHeaders = getGitHubHeaders(env);\n        deleteHeaders['Content-Type'] = 'application/json';\n\n        console.log('\uD83D\uDDD1\uFE0F Attempting to delete theme:', themeId, 'from status:', status);\n        console.log('\uD83D\uDD17 Delete URL:', deleteUrl);\n        console.log('\uD83D\uDCDD Commit message:', `Delete ${status} theme: ${themeId}`);\n\n        const response = await fetch(deleteUrl, {\n            method: 'DELETE',\n            headers: deleteHeaders,\n            body: JSON.stringify({\n                message: `Delete ${status} theme: ${themeId}`,\n                sha: fileInfo.sha,\n                branch: getBranch(env)\n            })\n        });\n\n        console.log('\uD83D\uDCCA Delete response status:', response.status);\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('\u274C Delete error details:', errorText);\n        }\n\n        // Handle both success (200) and \"directory cleanup\" cases (204)\n        if (response.ok || response.status === 204) {\n            // Also try to delete associated preview image if it exists\n            try {\n                const previewPath = `themes/${status}/${themeId}-preview.png`;\n                const branch = getBranch(env);\n                const previewFileInfoUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${previewPath}?ref=${branch}`;\n                const previewFileInfoResponse = await fetch(previewFileInfoUrl, {\n                    headers: headers\n                });\n\n                if (previewFileInfoResponse.ok) {\n                    const previewFileInfo = await previewFileInfoResponse.json();\n                    const previewDeleteUrl = `https://api.github.com/repos/${owner}/${repo}/contents/${previewPath}`;\n                    await fetch(previewDeleteUrl, {\n                        method: 'DELETE',\n                        headers: deleteHeaders,\n                        body: JSON.stringify({\n                            message: `Delete ${status} theme preview: ${themeId}`,\n                            sha: previewFileInfo.sha,\n                            branch: getBranch(env)\n                        })\n                    });\n                }\n            } catch (previewError) {\n                console.error('Preview deletion error (continuing):', previewError);\n            }\n\n            return true;\n        } else {\n            const errorText = await response.text();\n            console.error('Delete error:', response.status, errorText);\n            return false;\n        }\n    } catch (error) {\n        console.error('Delete Error:', error);\n        // Even if we get an error, the file might have been deleted\n        // This can happen with the last file in a directory\n        return true;\n    }\n}", "import {\n  getAllThemesFromGitHub,\n  saveThemeToGitHub,\n  getThemeFromGitHub,\n} from \"../utils/github.js\";\n\n// Reusable function to generate the standard navbar HTML\nexport function getNavbarHtml(activePage, isAdmin) {\n  const adminLink = isAdmin\n    ? `\n        <a href=\"/admin/dashboard\" class=\"nav-btn ${activePage === \"admin\" ? \"active\" : \"\"}\">\n            <span class=\"material-symbols-outlined\">shield_person</span>\n            <span>Admin Panel</span>\n        </a>\n        <form method=\"POST\" action=\"/admin/logout\" style=\"display: inline;\">\n            <button type=\"submit\" class=\"nav-btn logout-btn\">\n                <span class=\"material-symbols-outlined\">logout</span>\n                <span>Logout</span>\n            </button>\n        </form>`\n    : `\n        <a href=\"/admin/login\" class=\"nav-btn ${activePage === \"admin\" ? \"active\" : \"\"}\">\n            <span class=\"material-symbols-outlined\">shield_person</span>\n            <span>Admin</span>\n        </a>`;\n\n  return `\n    <header>\n        <div class=\"container\">\n            <nav class=\"navbar\" role=\"navigation\" aria-label=\"Main\">\n                <a href=\"/\" class=\"logo\">\n                    <span class=\"material-symbols-outlined\" aria-hidden=\"true\">palette</span>\n                    <span>ThemeHub</span>\n                </a>\n                <button id=\"navToggle\" class=\"nav-btn mobile-toggle\" aria-label=\"Toggle navigation\" aria-expanded=\"false\" aria-controls=\"mobileDrawer\">\n                    <span class=\"material-symbols-outlined\" aria-hidden=\"true\">menu</span>\n                </button>\n                <div class=\"nav-links\" id=\"navLinks\">\n                    <a href=\"/\" class=\"nav-btn ${activePage === \"home\" ? \"active\" : \"\"}\">\n                        <span class=\"material-symbols-outlined\" aria-hidden=\"true\">home</span>\n                        <span>Home</span>\n                    </a>\n                    <a href=\"/build\" class=\"nav-btn ${activePage === \"building\" ? \"active\" : \"\"}\">\n                        <span class=\"material-symbols-outlined\" aria-hidden=\"true\">construction</span>\n                        <span>Building</span>\n                    </a>\n                    <a href=\"/submit\" class=\"nav-btn ${activePage === \"submit\" ? \"active\" : \"\"}\">\n                        <span class=\"material-symbols-outlined\" aria-hidden=\"true\">add_circle</span>\n                        <span>Submit Theme</span>\n                    </a>\n                    ${adminLink}\n                    <button id=\"themeToggle\" class=\"nav-btn theme-toggle\">\n                        <span class=\"material-symbols-outlined\" aria-hidden=\"true\">light_mode</span>\n                        <span>Light Mode</span>\n                    </button>\n                </div>\n            </nav>\n        </div>\n        <!-- Mobile drawer -->\n        <div id=\"mobileOverlay\" class=\"mobile-overlay\" hidden></div>\n        <aside id=\"mobileDrawer\" class=\"mobile-drawer\" aria-hidden=\"true\" tabindex=\"-1\">\n            <div class=\"drawer-header\">\n                <span class=\"brand\"><span class=\"material-symbols-outlined\" aria-hidden=\"true\">palette</span> ThemeHub</span>\n                <button id=\"drawerClose\" class=\"icon-btn\" aria-label=\"Close menu\">\n                    <span class=\"material-symbols-outlined\" aria-hidden=\"true\">close</span>\n                </button>\n            </div>\n            <div class=\"drawer-links\">\n                <a href=\"/\" class=\"nav-btn ${activePage === \"home\" ? \"active\" : \"\"}\"><span class=\"material-symbols-outlined\" aria-hidden=\"true\">home</span><span>Home</span></a>\n                <a href=\"/build\" class=\"nav-btn ${activePage === \"building\" ? \"active\" : \"\"}\"><span class=\"material-symbols-outlined\" aria-hidden=\"true\">construction</span><span>Building</span></a>\n                <a href=\"/submit\" class=\"nav-btn ${activePage === \"submit\" ? \"active\" : \"\"}\"><span class=\"material-symbols-outlined\" aria-hidden=\"true\">add_circle</span><span>Submit Theme</span></a>\n                ${adminLink}\n                <button id=\"themeToggleMobile\" class=\"nav-btn theme-toggle\"><span class=\"material-symbols-outlined\" aria-hidden=\"true\">light_mode</span><span>Light Mode</span></button>\n            </div>\n        </aside>\n    </header>\n    <style>\n    header .container { position: relative; }\n    .icon-btn { background: transparent; border: none; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; padding: 6px; border-radius: 8px; }\n    .icon-btn:hover { background: var(--md-sys-color-primary-container); }\n\n    /* Desktop: show inline links */\n    @media (min-width: 769px) {\n        .mobile-toggle { display: none !important; }\n        .nav-links { display: flex !important; }\n        .mobile-overlay { display: none !important; }\n        .mobile-drawer { display: none !important; }\n    }\n\n    /* Mobile: hide inline links, use drawer */\n    @media (max-width: 768px) {\n        .nav-links { display: none !important; }\n        .mobile-toggle {\n            display: inline-flex; align-items: center; justify-content: center;\n            width: 36px; height: 36px; padding: 0; border-radius: 8px;\n            position: absolute; right: 8px; top: 8px; background: transparent;\n        }\n        .mobile-toggle .material-symbols-outlined { font-size: 22px; }\n\n        .mobile-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); backdrop-filter: blur(2px); z-index: 999; opacity: 0; transition: opacity .2s ease; }\n        .mobile-overlay.show { opacity: 1; }\n\n        .mobile-drawer { position: fixed; top: 0; right: -320px; width: 280px; height: 100vh; background: var(--md-sys-color-surface); border-left: 1px solid var(--md-sys-color-outline); box-shadow: -10px 0 24px rgba(0,0,0,.25); z-index: 1000; transition: right .2s ease; display: flex; flex-direction: column; }\n        .mobile-drawer.open { right: 0; }\n        .drawer-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 12px; border-bottom: 1px solid var(--md-sys-color-outline); }\n        .drawer-header .brand { display: inline-flex; align-items: center; gap: 8px; font-weight: 600; }\n        .drawer-links { display: flex; flex-direction: column; padding: 8px; gap: 6px; }\n        .drawer-links .nav-btn { width: 100%; justify-content: flex-start; padding: 10px 12px; font-size: 1rem; border-radius: 10px; }\n    }\n    </style>\n    <script>\n    (function(){\n        try {\n            const body = document.body;\n            const toggle = document.getElementById('themeToggle');\n            const toggleMobile = document.getElementById('themeToggleMobile');\n            const menuBtn = document.getElementById('navToggle');\n            const drawer = document.getElementById('mobileDrawer');\n            const overlay = document.getElementById('mobileOverlay');\n            const drawerClose = document.getElementById('drawerClose');\n\n            function openDrawer(){\n                drawer.classList.add('open');\n                drawer.setAttribute('aria-hidden','false');\n                overlay.hidden = false;\n                // Force reflow for transition\n                void overlay.offsetWidth;\n                overlay.classList.add('show');\n                menuBtn.setAttribute('aria-expanded','true');\n                body.style.overflow = 'hidden';\n                drawer.focus();\n            }\n            function closeDrawer(){\n                drawer.classList.remove('open');\n                drawer.setAttribute('aria-hidden','true');\n                overlay.classList.remove('show');\n                menuBtn.setAttribute('aria-expanded','false');\n                body.style.overflow = '';\n                setTimeout(()=>{ overlay.hidden = true; }, 200);\n            }\n\n            if (menuBtn && drawer && overlay) {\n                menuBtn.addEventListener('click', () => {\n                    const isOpen = drawer.classList.contains('open');\n                    if (isOpen) closeDrawer(); else openDrawer();\n                });\n                overlay.addEventListener('click', closeDrawer);\n                if (drawerClose) drawerClose.addEventListener('click', closeDrawer);\n                drawer.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeDrawer(); });\n            }\n\n            function syncThemeButton(btn){\n                if (!btn) return;\n                const icon = btn.querySelector('.material-symbols-outlined');\n                const label = btn.querySelector('span:nth-child(2)');\n                const isDark = document.body.classList.contains('dark-mode');\n                if (isDark) { if (icon) icon.textContent = 'light_mode'; if (label) label.textContent = 'Light Mode'; }\n                else { if (icon) icon.textContent = 'dark_mode'; if (label) label.textContent = 'Dark Mode'; }\n            }\n\n            function initTheme(btn){\n                const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n                const saved = localStorage.getItem('theme');\n                const initialDark = saved ? saved === 'dark' : prefersDark;\n                if (initialDark) document.body.classList.add('dark-mode'); else document.body.classList.remove('dark-mode');\n                syncThemeButton(btn);\n            }\n\n            // Init and click handlers for both theme buttons\n            initTheme(toggle);\n            initTheme(toggleMobile);\n            [toggle, toggleMobile].forEach((btn)=>{\n                if (!btn) return;\n                btn.addEventListener('click', ()=>{\n                    const nextDark = !document.body.classList.contains('dark-mode');\n                    if (nextDark) document.body.classList.add('dark-mode'); else document.body.classList.remove('dark-mode');\n                    localStorage.setItem('theme', nextDark ? 'dark' : 'light');\n                    syncThemeButton(toggle);\n                    syncThemeButton(toggleMobile);\n                });\n            });\n        } catch(_) { /* noop */ }\n    })();\n    </script>\n    `;\n}\n\n// Reusable CSS style block\nexport const sharedStyles = `\n<style>\n    :root {\n        --md-sys-color-primary: #4361ee;\n        --md-sys-color-on-primary: #ffffff;\n        --md-sys-color-primary-container: #cde5ff;\n        --md-sys-color-on-primary-container: #001d32;\n        --md-sys-color-secondary: #51606f;\n        --md-sys-color-on-secondary: #ffffff;\n        --md-sys-color-secondary-container: #d4e4f6;\n        --md-sys-color-on-secondary-container: #0d1d2a;\n        --md-sys-color-surface: #fbfcfe;\n        --md-sys-color-on-surface: #1a1c1e;\n        --md-sys-color-surface-variant: #eef1f6;\n        --md-sys-color-on-surface-variant: #42474e;\n        --md-sys-color-outline: #73777f;\n        --md-sys-color-background: #ffffff;\n        --md-sys-color-background-variant: #f5f8fa;\n        --md-sys-color-error: #ba1a1a;\n        --md-sys-color-error-container: #ffdad6;\n        --md-sys-color-on-error-container: #410002;\n        --md-sys-color-success: #006d3a;\n        --md-sys-color-success-container: #99f7b5;\n        --md-sys-color-on-success-container: #00210d;\n        --md-sys-color-shadow: rgba(0, 0, 0, 0.15);\n\n        /* Search bar colors - Light Mode Defaults */\n        --search-background-color: #ffffff;\n        --search-text-color: #1a1c1e;\n        --search-border-color: #e0e0e0;\n        --search-placeholder-color: #73777f;\n    }\n    /* Dark Theme */\n    .dark-mode {\n        --md-sys-color-primary: #97cbff;\n        --md-sys-color-on-primary: #003352;\n        --md-sys-color-primary-container: #004a74;\n        --md-sys-color-on-primary-container: #cde5ff;\n        --md-sys-color-secondary: #b8c8da;\n        --md-sys-color-on-secondary: #233240;\n        --md-sys-color-secondary-container: #394857;\n        --md-sys-color-on-secondary-container: #d4e4f6;\n        --md-sys-color-surface: #1a1c1e;\n        --md-sys-color-on-surface: #e2e2e5;\n        --md-sys-color-surface-variant: #282b30;\n        --md-sys-color-on-surface-variant: #c2c7cf;\n        --md-sys-color-outline: #8c9199;\n        --md-sys-color-background: #121416;\n        --md-sys-color-background-variant: #1a1c1e;\n        --md-sys-color-error: #ffb4ab;\n        --md-sys-color-error-container: #93000a;\n        --md-sys-color-on-error-container: #ffdad6;\n        --md-sys-color-success: #6bdd9b;\n        --md-sys-color-success-container: #00522a;\n        --md-sys-color-on-success-container: #99f7b5;\n        --md-sys-color-shadow: rgba(0, 0, 0, 0.4);\n\n        /* Search bar colors - Dark Mode */\n        --search-background-color: #1f1f1f;\n        --search-text-color: #e0e0e0;\n        --search-border-color: #333;\n        --search-placeholder-color: #8c9199;\n    }\n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body {\n        font-family: 'Roboto', sans-serif;\n        background-color: var(--md-sys-color-background-variant);\n        color: var(--md-sys-color-on-surface);\n        line-height: 1.6;\n        transition: background-color 0.3s ease, color 0.3s ease;\n    }\n    .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 24px; }\n    header {\n        background-color: var(--md-sys-color-surface);\n        border-bottom: 1px solid var(--md-sys-color-outline);\n        position: sticky;\n        top: 0;\n        z-index: 100;\n        transition: background-color 0.3s ease, border-bottom 0.3s ease;\n    }\n\n    .navbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; }\n\n    .logo {\n        display: flex; align-items: center; gap: 6px; font-size: 1.25rem;\n        font-weight: 700; color: var(--md-sys-color-primary); text-decoration: none;\n    }\n    .navbar .material-symbols-outlined { font-size: 20px; }\n\n    .nav-links { display: flex; gap: 6px; align-items: center; }\n\n    .nav-btn {\n        display: inline-flex;\n        align-items: center;\n        gap: 6px;\n        text-decoration: none;\n        color: var(--md-sys-color-on-surface-variant);\n        font-weight: 500;\n        padding: 8px 12px;\n        border-radius: 12px;\n        transition: background-color 0.2s ease, color 0.2s ease;\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-family: inherit;\n        font-size: 0.95rem;\n        line-height: 1;\n    }\n\n    .nav-btn:hover {\n        background-color: var(--md-sys-color-secondary-container);\n        color: var(--md-sys-color-on-secondary-container);\n    }\n\n    .nav-btn.active {\n        background-color: var(--md-sys-color-primary);\n        color: var(--md-sys-color-on-primary);\n    }\n\n    .logout-btn {\n        background-color: var(--md-sys-color-error-container);\n        color: var(--md-sys-color-on-error-container);\n    }\n    .logout-btn:hover {\n        background-color: var(--md-sys-color-error);\n        color: var(--md-sys-color-on-error);\n    }\n    .theme-toggle {\n        background-color: var(--md-sys-color-secondary-container);\n        border: none;\n        color: var(--md-sys-color-on-secondary-container);\n        padding: 10px 16px;\n        border-radius: 20px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        transition: background-color 0.2s ease;\n        font-family: inherit;\n        font-size: inherit;\n    }\n    .theme-toggle:hover {\n        background-color: var(--md-sys-color-primary-container);\n        color: var(--md-sys-color-on-primary-container);\n    }\n    main { padding: 48px 0; }\n    .page-header {\n        text-align: center;\n        margin-bottom: 48px;\n    }\n    .page-header h1 {\n        font-size: 2.8rem;\n        font-weight: 700;\n        color: var(--md-sys-color-on-surface);\n        margin-bottom: 16px;\n    }\n    .page-header p {\n        font-size: 1.2rem;\n        color: var(--md-sys-color-on-surface-variant);\n        max-width: 600px;\n        margin: 0 auto;\n    }\n    .theme-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n        gap: 32px;\n        margin-top: 32px;\n    }\n    .theme-card {\n        background-color: var(--md-sys-color-background);\n        border: 1px solid var(--md-sys-color-outline);\n        border-radius: 16px;\n        overflow: hidden;\n        display: flex;\n        flex-direction: column;\n        transition: box-shadow 0.3s ease, transform 0.3s ease;\n        box-shadow: 0 1px 3px var(--md-sys-color-shadow);\n    }\n\n    /* Keep previews consistent (crop 9:16 phone shots to 16:9) */\n    .theme-preview {\n        width: 100%;\n        aspect-ratio: 16 / 9;\n        overflow: hidden;\n        background-color: var(--md-sys-color-surface-variant);\n        border-bottom: 1px solid var(--md-sys-color-outline);\n    }\n    .theme-preview.portrait { aspect-ratio: 9 / 16; }\n    .theme-preview img {\n        width: 100%;\n        height: 100%;\n        display: block;\n        object-fit: cover; /* center-crop tall images */\n        object-position: center;\n    }\n\n    .theme-card:hover { transform: translateY(-4px); box-shadow: 0 4px 12px var(--md-sys-color-shadow); }\n    .theme-header { padding: 24px; border-bottom: 1px solid var(--md-sys-color-outline); }\n    .theme-title { font-size: 1.5rem; color: var(--md-sys-color-on-surface); font-weight: 500; }\n    .theme-meta { color: var(--md-sys-color-on-surface-variant); font-size: 0.9rem; margin-top: 8px; }\n    .theme-body {\n        padding: 24px;\n        flex-grow: 1;\n    }\n    .theme-description {\n        color: var(--md-sys-color-on-surface-variant);\n        margin-bottom: 24px;\n        line-height: 1.5;\n    }\n    .theme-actions {\n        padding: 16px 24px;\n        background-color: var(--md-sys-color-surface-variant);\n        display: flex;\n        gap: 12px;\n        flex-wrap: wrap;\n    }\n    .btn {\n        padding: 10px 20px;\n        border: none;\n        border-radius: 20px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n        text-decoration: none;\n        display: inline-flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 0.9rem;\n        justify-content: center;\n    }\n    .btn-filled {\n        background-color: var(--md-sys-color-primary);\n        color: var(--md-sys-color-on-primary);\n    }\n    .btn-filled:hover {\n        background-color: var(--md-sys-color-secondary);\n    }\n    .btn-outlined {\n        background-color: transparent;\n        border: 1px solid var(--md-sys-color-outline);\n        color: var(--md-sys-color-primary);\n    }\n    .btn-outlined:hover {\n        background-color: var(--md-sys-color-primary);\n        color: var(--md-sys-color-on-primary);\n    }\n    .btn-copy {\n        background-color: var(--md-sys-color-primary);\n        color: var(--md-sys-color-on-primary);\n    }\n    .btn-copy:hover {\n        background-color: var(--md-sys-color-primary-container);\n        color: var(--md-sys-color-on-primary-container);\n    }\n    .empty-state {\n        text-align: center;\n        padding: 64px 24px;\n    }\n    .empty-state .material-symbols-outlined {\n        font-size: 4rem;\n        color: var(--md-sys-color-secondary-container);\n        margin-bottom: 24px;\n    }\n    .empty-state h3 {\n        font-size: 1.8rem;\n        color: var(--md-sys-color-on-surface);\n        margin-bottom: 16px;\n    }\n    .empty-state p {\n        color: var(--md-sys-color-on-surface-variant);\n        margin-bottom: 24px;\n    }\n    footer {\n        background-color: var(--md-sys-color-surface);\n        border-top: 1px solid var(--md-sys-color-outline);\n        color: var(--md-sys-color-on-surface-variant);\n        text-align: center;\n        padding: 32px 0;\n        margin-top: 64px;\n        transition: background-color 0.3s ease, border 0.3s ease, color 0.3s ease;\n    }\n    .notification {\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        padding: 15px 20px;\n        background-color: var(--md-sys-color-success);\n        color: var(--md-sys-color-on-success-container);\n        border-radius: 8px;\n        box-shadow: 0 4px 6px var(--md-sys-color-shadow);\n        transform: translateX(200%);\n        transition: transform 0.3s ease;\n        z-index: 1000;\n    }\n    .notification.show {\n        transform: translateX(0);\n    }\n    .file-drop-area {\n        border: 2px dashed var(--md-sys-color-outline);\n        border-radius: 12px;\n        padding: 40px;\n        text-align: center;\n        cursor: pointer;\n        transition: border-color 0.3s ease;\n    }\n    .file-drop-area:hover, .file-drop-area.drag-over {\n        border-color: var(--md-sys-color-primary);\n    }\n    .file-drop-area input[type=\"file\"] {\n        display: none;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: pointer;\n    }\n    .preview-container {\n        margin: 20px 0;\n        text-align: center;\n    }\n    .preview-image {\n        max-width: 100%;\n        max-height: 300px;\n        border-radius: 8px;\n        border: 1px solid var(--md-sys-color-outline);\n    }\n    /* In submit form, crop live preview to 16:9 as well */\n    .preview-container .preview-image {\n            width: 100%;\n        max-height: none;\n        aspect-ratio: 16 / 9;\n        object-fit: cover;\n    }\n    @media (max-width: 768px) {\n        .navbar { flex-direction: column; gap: 16px; }\n        .nav-links { flex-direction: column; width: 100%; }\n        .theme-grid { grid-template-columns: 1fr; }\n        .container { padding: 0 16px; }\n        .page-header h1 { font-size: 2rem; }\n        .card { padding: 20px; }\n        .nav-btn { width: 100%; justify-content: center; }\n        .theme-actions { flex-direction: column; }\n        .theme-actions .btn { width: 100%; }\n    }\n\n    /* Phone-first refinements */\n    @media (max-width: 480px) {\n        .container { padding: 0 12px; }\n        .page-header h1 { font-size: 1.8rem; }\n        .page-header p { font-size: 1rem; }\n        .nav-links { gap: 8px; }\n        .nav-btn { padding: 12px 14px; font-size: 1rem; }\n        .form-control { padding: 14px; font-size: 1rem; }\n        .btn { padding: 12px 14px; font-size: 1rem; width: 100%; }\n        .json-toolbar { padding: 6px; gap: 6px; }\n        .json-toolbar .btn { flex: 1 1 calc(50% - 6px); }\n        .theme-card { border-radius: 12px; }\n        .theme-preview { aspect-ratio: 16 / 9; }\n        .preview-container .preview-image { aspect-ratio: 16 / 9; }\n    }\n</style>\n`;\n\nexport async function showHomePage(request) {\n  const env = request.env;\n\n  try {\n    const themes = await getAllThemesFromGitHub(env, \"approved\");\n\n    const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>ThemeHub - Discord themes page</title>\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap\">\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap\">\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\" />\n    <link rel=\"icon\" href=\"/favicon.png?v=2\" type=\"image/png\">\n    ${sharedStyles}\n    <style>\n        /* Placeholder color for search input */\n        #themeSearch::placeholder {\n            color: var(--search-placeholder-color);\n        }\n    </style>\n</head>\n<body>\n    <div id=\"notification\" class=\"notification\">Link copied to clipboard!</div>\n\n    ${getNavbarHtml(\"home\", false)}\n\n    <main>\n        <div class=\"container\">\n            <div class=\"page-header\">\n                <h1><span class=\"material-symbols-outlined\">palette</span> Available Themes</h1>\n                <p>Discover and download themes for Kettu/Revenge Discord Clients!</p>\n            </div>\n\n            <div class=\"search-container\" style=\"margin-bottom: 24px; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto;\">\n                <div style=\"position: relative;\">\n                    <input\n                        type=\"text\"\n                        id=\"themeSearch\"\n                        placeholder=\"Search themes...\"\n                        style=\"\n                            width: 100% !important;\n                            padding-left: 16px !important;\n                            border-radius: 12px !important;\n                            border: 1px solid var(--search-border-color) !important; /* Use variable */\n                            background: var(--search-background-color) !important; /* Use variable */\n                            color: var(--search-text-color) !important; /* Use variable */\n                            font-size: 1rem !important;\n                            padding: 16px 20px !important;\n                            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4) !important;\n                            transition: all 0.2s ease !important;\n                        \"\n                        class=\"form-control\"\n                    />\n                </div>\n            </div>\n\n            ${\n              themes.length > 0\n                ? `\n            <div class=\"theme-grid\">\n                ${themes\n                  .map(\n                    (theme) => `\n                <div class=\"theme-card\">\n                    ${\n                      theme.previewUrl\n                        ? `\n                    <div class=\"theme-preview\">\n                        <img src=\"${theme.previewUrl}\" alt=\"${theme.name} Preview\" onerror=\"this.style.display='none'\">\n                    </div>\n                    `\n                        : \"\"\n                    }\n                    <div class=\"theme-header\">\n                        <h3 class=\"theme-title\">${theme.name}</h3>\n                        <div class=\"theme-meta\">\n                            <span><span class=\"material-symbols-outlined\">calendar_today</span> ${theme.createdAt || \"Unknown\"}</span>\n                        </div>\n                    </div>\n                    <div class=\"theme-body\">\n                        <p class=\"theme-description\">${theme.description}</p>\n                    </div>\n                    <div class=\"theme-actions\">\n                        <a href=\"/theme/${theme.id}\" class=\"btn btn-filled\">\n                            <span class=\"material-symbols-outlined\">visibility</span> View Details\n                        </a>\n                        <button class=\"btn btn-copy\" onclick=\"copyThemeLink('${theme.id}')\">\n                            <span class=\"material-symbols-outlined\">link</span> Copy Raw Link\n                        </button>\n                    </div>\n                </div>\n                `,\n                  )\n                  .join(\"\")}\n            </div>\n            `\n                : `\n            <div class=\"empty-state\">\n                <span class=\"material-symbols-outlined\">inbox</span>\n                <h3>No Themes Available</h3>\n                <p>Be the first to contribute a theme to our marketplace!</p>\n                <a href=\"/submit\" class=\"btn btn-filled\">\n                    <span class=\"material-symbols-outlined\">add</span> Submit Your First Theme\n                </a>\n            </div>\n            `\n            }\n        </div>\n    </main>\n\n    <footer>\n        <div class=\"container\">\n            <p>&copy; 2023 ThemeHub. Professional Theme Marketplace.</p>\n        </div>\n    </footer>\n\n    <script>\n        const allThemes = ${JSON.stringify(themes)};\n        document.addEventListener('DOMContentLoaded', function() {\n            const themeSearchInput = document.getElementById('themeSearch');\n            const themeGrid = document.querySelector('.theme-grid');\n\n            function renderThemes(themesToRender) {\n                if (themesToRender.length === 0) {\n                    themeGrid.innerHTML = '<p style=\"text-align: center; color: var(--md-sys-color-on-surface-variant);\">No themes found matching your criteria.</p>';\n                    return;\n                }\n                themeGrid.innerHTML = themesToRender.map(theme => \\`\n                <div class=\"theme-card\">\n                    \\${theme.previewUrl ? \\`\n                    <div class=\"theme-preview\">\n                        <img src=\"\\${theme.previewUrl}\" alt=\"\\${theme.name} Preview\" onerror=\"this.style.display='none'\">\n                    </div>\n                    \\` : \"\"}\\\n                    <div class=\"theme-header\">\n                        <h3 class=\"theme-title\">\\${theme.name}</h3>\n                        <div class=\"theme-meta\">\n                            <span><span class=\"material-symbols-outlined\">calendar_today</span> \\${theme.createdAt || \"Unknown\"}</span>\n                        </div>\n                    </div>\n                    <div class=\"theme-body\">\n                        <p class=\"theme-description\">\\${theme.description}</p>\n                    </div>\n                    <div class=\"theme-actions\">\n                        <a href=\"/theme/\\${theme.id}\" class=\"btn btn-filled\">View Details</a>\n                        <button class=\"btn btn-outlined\" onclick=\"copyThemeLink('\\${theme.id}')\">\n                            <span class=\"material-symbols-outlined\">link</span> Copy Link\n                        </button>\n                    </div>\n                </div>\n                \\`).join('');\n            }\n\n            function filterThemes(query) {\n                const lowerCaseQuery = query.toLowerCase();\n                return allThemes.filter(theme =>\n                    theme.name.toLowerCase().includes(lowerCaseQuery) ||\n                    theme.description.toLowerCase().includes(lowerCaseQuery)\n                );\n            }\n\n            themeSearchInput.addEventListener('input', (event) => {\n                const searchQuery = event.target.value;\n                const filtered = filterThemes(searchQuery);\n                renderThemes(filtered);\n            });\n\n            // Initial render of all themes when the page loads\n            renderThemes(allThemes);\n        });\n\n        // Copy theme link functionality\n        function copyThemeLink(themeId) {\n            // Generate direct raw GitHub URL using the actual filename\n            const link = 'https://raw.githubusercontent.com/${env.GITHUB_OWNER}/${env.GITHUB_REPO}/refs/heads/main/themes/approved/' + themeId + '.json';\n            navigator.clipboard.writeText(link).then(() => {\n                const notification = document.getElementById('notification');\n                notification.textContent = 'Raw GitHub link copied to clipboard!';\n                notification.classList.add('show');\n                setTimeout(() => {\n                    notification.classList.remove('show');\n                }, 3000);\n            }).catch(err => {\n                console.error('Failed to copy: ', err);\n                // Fallback for older browsers\n                const textArea = document.createElement('textarea');\n                textArea.value = link;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n\n                const notification = document.getElementById('notification');\n                notification.textContent = 'Raw GitHub link copied to clipboard!';\n                notification.classList.add('show');\n                setTimeout(() => {\n                    notification.classList.remove('show');\n                }, 3000);\n            });\n        }\n    </script>\n</body>\n</html>`;\n\n    return new Response(html, {\n      headers: { \"Content-Type\": \"text/html\" },\n    });\n  } catch (error) {\n    console.error(\"Error loading home page:\", error);\n    return new Response(\"Error loading themes\", { status: 500 });\n  }\n}\n\nexport async function showSubmitForm(request) {\n  const url = new URL(request.url);\n  const message = url.searchParams.get(\"message\");\n  const isError = url.searchParams.get(\"error\") === \"1\";\n\n  const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Submit Theme - ThemeHub</title>\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap\">\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap\">\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\" />\n    <link rel=\"icon\" href=\"/favicon.png?v=2\" type=\"image/png\">\n    ${sharedStyles}\n    <style>\n        /* Submit page enhancements */\n        .submit-form-container {\n            display: flex;\n            gap: 24px;\n        }\n        .json-editor-section {\n            flex: 2;\n        }\n        .upload-sections-container {\n            flex: 1;\n        }\n        @media (max-width: 1200px) {\n            .submit-form-container {\n                flex-direction: column;\n            }\n        }\n        .upload-section {\n            background: var(--md-sys-color-surface-variant);\n            border-radius: 12px;\n            padding: 20px;\n            margin-bottom: 24px;\n            height: fit-content;\n        }\n        .upload-section-header {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n            margin-bottom: 16px;\n        }\n        .upload-section-header .material-symbols-outlined {\n            font-size: 24px;\n            color: var(--md-sys-color-primary);\n        }\n        .upload-section-header h3 {\n            margin: 0;\n            font-size: 1.1rem;\n            color: var(--md-sys-color-on-surface);\n        }\n        .json-toolbar { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px; background: var(--md-sys-color-surface); padding: 8px; border-radius: 10px; border: 1px solid var(--md-sys-color-outline); }\n        .json-toolbar .btn { padding: 8px 12px; border-radius: 8px; }\n        .code-editor {\n            background: var(--md-sys-color-surface-variant);\n            border: 1px solid var(--md-sys-color-outline);\n            border-radius: 12px;\n            box-shadow: 0 2px 8px var(--md-sys-color-shadow);\n            overflow: hidden;\n        }\n        .code-editor .editor-inner { padding: 12px; }\n        #themeData {\n            width: 100%;\n            min-height: 480px;\n            resize: vertical;\n            padding: 14px 16px;\n            border: none;\n            outline: none;\n            background: transparent;\n            font-family: 'Roboto Mono', monospace;\n            font-size: 0.95rem;\n            line-height: 1.5;\n            color: var(--md-sys-color-on-surface);\n            tab-size: 2;\n            caret-color: var(--md-sys-color-primary);\n            white-space: pre; /* wrap off domy\u015Blnie */\n        }\n        #themeData:focus { box-shadow: inset 0 0 0 2px var(--md-sys-color-primary-container); border-radius: 8px; }\n        .file-drop-area {\n            border: 2px dashed var(--md-sys-color-outline);\n            background: var(--md-sys-color-background);\n            padding: 24px;\n            border-radius: 8px;\n            text-align: center;\n            cursor: pointer;\n            transition: all 0.2s ease;\n        }\n        .file-drop-area:hover {\n            border-color: var(--md-sys-color-primary);\n            background: var(--md-sys-color-surface);\n        }\n        .file-drop-area.drag-over {\n            border-color: var(--md-sys-color-primary);\n            background: var(--md-sys-color-primary-container);\n        }\n        .preview-image {\n            max-width: 100%;\n            border-radius: 12px;\n            box-shadow: 0 4px 12px var(--md-sys-color-shadow);\n        }\n        .form-sidebar {\n            position: sticky;\n            top: 24px;\n        }\n        /* Custom scrollbar */\n        #themeData::-webkit-scrollbar { width: 12px; height: 12px; }\n        #themeData::-webkit-scrollbar-thumb { background: var(--md-sys-color-outline); border-radius: 10px; }\n        #themeData::-webkit-scrollbar-thumb:hover { background: var(--md-sys-color-on-surface-variant); }\n        #themeData::-webkit-scrollbar-track { background: transparent; }\n\n        /* Guidelines section styling */\n        .guidelines-card {\n            background: var(--md-sys-color-surface);\n            border: 1px solid var(--md-sys-color-outline);\n            padding: 24px;\n            border-radius: 12px;\n        }\n        .guidelines-card h3 {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n            margin-bottom: 16px;\n            color: var(--md-sys-color-on-surface);\n            font-size: 1.3rem;\n        }\n        .guidelines-card ul {\n            list-style: none;\n            padding: 0;\n            margin: 0;\n            color: var(--md-sys-color-on-surface-variant);\n            display: flex;\n            flex-direction: column;\n            gap: 12px;\n        }\n        .guidelines-card li {\n            position: relative;\n            padding-left: 24px;\n        }\n        .guidelines-card li::before {\n            content: '\u2022';\n            position: absolute;\n            left: 0;\n            color: var(--md-sys-color-primary);\n            font-weight: bold;\n            font-size: 1.2rem;\n        }\n    </style>\n</head>\n<body>\n    ${getNavbarHtml(\"submit\", false)}\n\n    <main>\n        <div class=\"container\">\n            <div class=\"page-header\">\n                <h1><span class=\"material-symbols-outlined\">cloud_upload</span> Submit New Theme</h1>\n                <p>Share your professionally designed theme with the community</p>\n            </div>\n\n            ${\n              message\n                ? `\n            <div class=\"alert ${isError ? \"alert-danger\" : \"alert-success\"}\">\n                <span class=\"material-symbols-outlined\">${isError ? \"error\" : \"check_circle\"}</span> ${message}\n            </div>\n            `\n                : \"\"\n            }\n\n            <div class=\"card\">\n                <form method=\"POST\" action=\"/submit\" enctype=\"multipart/form-data\">\n                    <div class=\"submit-form-container\">\n                        <div class=\"json-editor-section\">\n                            <div class=\"form-group\">\n                                <label class=\"form-label\" for=\"themeData\">Theme JSON Configuration</label>\n                                <div class=\"json-toolbar\">\n                                    <button type=\"button\" id=\"btnValidateJson\" class=\"btn btn-outlined\"><span class=\"material-symbols-outlined\">rule</span> Validate</button>\n                                    <button type=\"button\" id=\"btnFormatJson\" class=\"btn btn-outlined\"><span class=\"material-symbols-outlined\">format_align_left</span> Format</button>\n                                    <button type=\"button\" id=\"btnSampleJson\" class=\"btn btn-outlined\"><span class=\"material-symbols-outlined\">description</span> Load sample</button>\n                                    <button type=\"button\" id=\"btnCopyJson\" class=\"btn btn-outlined\"><span class=\"material-symbols-outlined\">content_copy</span> Copy</button>\n                                    <button type=\"button\" id=\"btnToggleWrap\" class=\"btn btn-outlined\"><span class=\"material-symbols-outlined\">wrap_text</span> Wrap</button>\n                                    <button type=\"button\" id=\"btnFontMinus\" class=\"btn btn-outlined\"><span class=\"material-symbols-outlined\">text_decrease</span></button>\n                                    <button type=\"button\" id=\"btnFontPlus\" class=\"btn btn-outlined\"><span class=\"material-symbols-outlined\">text_increase</span></button>\n                                </div>\n                                <div class=\"code-editor\">\n                                    <div class=\"editor-inner\">\n                        <textarea\n                            class=\"form-control\"\n                            id=\"themeData\"\n                            name=\"themeData\"\n                                            placeholder='{\"name\":\"Modern Dark Theme\",\"description\":\"A sleek dark theme with vibrant accents\",\"colors\":{\"primary\":\"#4361ee\",\"secondary\":\"#3f37c9\",\"background\":\"#101010\",\"text\":\"#f8f9fa\"},\"fonts\":{\"heading\":\"Poppins, sans-serif\",\"body\":\"Inter, sans-serif\"}}'\n                            required></textarea>\n                                        </div>\n                                    </div>\n                        </div>\n                                <div id=\"jsonStatus\" style=\"margin-top:8px; font-size:0.9rem; color: var(--md-sys-color-on-surface-variant);\"></div>\n                            </div>\n                        </div>\n                        <div class=\"upload-sections-container\">\n                        <div class=\"form-group\">\n                                <div class=\"upload-section\">\n                                    <div class=\"upload-section-header\">\n                                        <span class=\"material-symbols-outlined\">upload_file</span>\n                                        <h3>Import JSON file</h3>\n                                    </div>\n                                    <div class=\"file-drop-area\" id=\"jsonDropArea\">\n                                    <span class=\"material-symbols-outlined\" style=\"font-size: 3rem; color: var(--md-sys-color-on-surface-variant);\">upload_file</span>\n                                    <p style=\"color: var(--md-sys-color-on-surface-variant);\">Drag & Drop your .json here</p>\n                                    <p style=\"font-size: 0.9rem; color: var(--md-sys-color-on-surface-variant);\">or click to select a file (JSON)</p>\n                                    <input type=\"file\" id=\"themeJsonFile\" accept=\"application/json,.json\" style=\"display: none;\">\n                                </div>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <div class=\"upload-section\">\n                            <div class=\"upload-section-header\">\n                                <span class=\"material-symbols-outlined\">image</span>\n                                <h3>Preview Image (Optional)</h3>\n                            </div>\n                            <div class=\"file-drop-area\" id=\"fileDropArea\">\n                            <span class=\"material-symbols-outlined\" style=\"font-size: 3rem; color: var(--md-sys-color-on-surface-variant);\">cloud_upload</span>\n                            <p style=\"color: var(--md-sys-color-on-surface-variant);\">Drag & Drop your preview image here</p>\n                            <p style=\"font-size: 0.9rem; color: var(--md-sys-color-on-surface-variant);\">or click to select a file (PNG, JPG, GIF)</p>\n                            <input type=\"file\" id=\"previewImage\" name=\"previewImage\" accept=\"image/*\" style=\"display: none;\">\n                        </div>\n                        <div class=\"preview-container\" id=\"previewContainer\" style=\"display: none;\">\n                            <img id=\"previewImg\" class=\"preview-image\" src=\"\" alt=\"Preview\">\n                            <button type=\"button\" id=\"removePreview\" class=\"btn btn-outlined\" style=\"margin-top: 10px;\">\n                                <span class=\"material-symbols-outlined\">delete</span> Remove Preview\n                            </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <button type=\"submit\" class=\"btn btn-filled\">\n                        <span class=\"material-symbols-outlined\">send</span> Submit for Review\n                    </button>\n                </form>\n            </div>\n\n            <div style=\"height: 24px;\"></div>\n\n            <div class=\"card guidelines-card\">\n                <h3><span class=\"material-symbols-outlined\">info</span> Submission Guidelines</h3>\n                <ul>\n                    <li>Ensure your JSON is valid and properly formatted</li>\n                    <li>Include a descriptive name and detailed description</li>\n                    <li>All submissions are reviewed before publication</li>\n                    <li>Inappropriate content will be rejected</li>\n                </ul>\n            </div>\n        </div>\n    </main>\n\n    <footer>\n        <div class=\"container\">\n            <p>&copy; 2023 ThemeHub. Professional Theme Marketplace.</p>\n        </div>\n    </footer>\n\n    <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            // Theme toggle fix for submit page\n            const fileDropArea = document.getElementById('fileDropArea');\n            const previewImageInput = document.getElementById('previewImage');\n            const previewContainer = document.getElementById('previewContainer');\n            const previewImg = document.getElementById('previewImg');\n            const removePreviewBtn = document.getElementById('removePreview');\n\n            const jsonDropArea = document.getElementById('jsonDropArea');\n            const jsonFileInput = document.getElementById('themeJsonFile');\n            const themeDataTextarea = document.getElementById('themeData');\n            const jsonStatus = document.getElementById('jsonStatus');\n            const btnValidateJson = document.getElementById('btnValidateJson');\n            const btnFormatJson = document.getElementById('btnFormatJson');\n            const btnSampleJson = document.getElementById('btnSampleJson');\n            const btnCopyJson = document.getElementById('btnCopyJson');\n            const btnToggleWrap = document.getElementById('btnToggleWrap');\n            const btnFontPlus = document.getElementById('btnFontPlus');\n            const btnFontMinus = document.getElementById('btnFontMinus');\n\n            let editorFontSize = 0.95; // rem\n\n            function setStatus(message, ok = true) {\n                jsonStatus.textContent = message;\n                jsonStatus.style.color = ok ? 'var(--md-sys-color-on-success-container)' : 'var(--md-sys-color-on-error-container)';\n                jsonStatus.style.background = ok ? 'var(--md-sys-color-success-container)' : 'var(--md-sys-color-error-container)';\n                jsonStatus.style.padding = '8px 12px';\n                jsonStatus.style.borderRadius = '8px';\n            }\n\n            btnValidateJson.addEventListener('click', () => {\n                try {\n                    JSON.parse(themeDataTextarea.value);\n                    setStatus('JSON is valid.');\n                } catch (e) {\n                    setStatus('Invalid JSON: ' + e.message, false);\n                }\n            });\n\n            btnFormatJson.addEventListener('click', () => {\n                try {\n                    const parsed = JSON.parse(themeDataTextarea.value);\n                    themeDataTextarea.value = JSON.stringify(parsed, null, 2);\n                    setStatus('JSON formatted.');\n                } catch (e) {\n                    setStatus('Cannot format invalid JSON: ' + e.message, false);\n                }\n            });\n\n            btnSampleJson.addEventListener('click', () => {\n                themeDataTextarea.value = JSON.stringify(sampleTheme, null, 2);\n                setStatus('Sample JSON loaded.');\n            });\n\n            btnCopyJson.addEventListener('click', async () => {\n                try {\n                    await navigator.clipboard.writeText(themeDataTextarea.value);\n                    setStatus('Copied to clipboard.');\n                } catch (e) {\n                    setStatus('Failed to copy: ' + e.message, false);\n                }\n            });\n\n            let wrapOn = false;\n            btnToggleWrap.addEventListener('click', () => {\n                wrapOn = !wrapOn;\n                themeDataTextarea.style.whiteSpace = wrapOn ? 'pre-wrap' : 'pre';\n                setStatus('Wrap ' + (wrapOn ? 'enabled' : 'disabled') + '.');\n            });\n\n            btnFontPlus.addEventListener('click', () => {\n                editorFontSize = Math.min(editorFontSize + 0.05, 1.4);\n                themeDataTextarea.style.fontSize = editorFontSize + 'rem';\n            });\n            btnFontMinus.addEventListener('click', () => {\n                editorFontSize = Math.max(editorFontSize - 0.05, 0.75);\n                themeDataTextarea.style.fontSize = editorFontSize + 'rem';\n            });\n\n            // JSON file drop area events\n            jsonDropArea.addEventListener('dragover', (e) => {\n                e.preventDefault();\n                jsonDropArea.classList.add('drag-over');\n            });\n            jsonDropArea.addEventListener('dragleave', () => {\n                jsonDropArea.classList.remove('drag-over');\n            });\n            // Make the JSON drop area clickable\n            jsonDropArea.addEventListener('click', () => {\n                jsonFileInput.click();\n            });\n\n            jsonDropArea.addEventListener('drop', (e) => {\n                e.preventDefault();\n                jsonDropArea.classList.remove('drag-over');\n                const files = e.dataTransfer.files;\n                if (files.length) {\n                    jsonFileInput.files = files;\n                    handleJsonFile(files[0]);\n                }\n            });\n            jsonFileInput.addEventListener('change', (e) => {\n                if (e.target.files.length) {\n                    handleJsonFile(e.target.files[0]);\n                }\n            });\n            function handleJsonFile(file) {\n                if (!file) return;\n                if (!(file.type === 'application/json' || file.name.toLowerCase().endsWith('.json'))) {\n                    setStatus('Please upload a .json file', false);\n                    return;\n                }\n                const reader = new FileReader();\n                reader.onload = (ev) => {\n                    try {\n                        const parsed = JSON.parse(ev.target.result);\n                        themeDataTextarea.value = JSON.stringify(parsed, null, 2);\n                        setStatus('JSON file loaded into configuration.');\n                    } catch (e) {\n                        setStatus('Invalid JSON file: ' + e.message, false);\n                    }\n                };\n                reader.readAsText(file);\n            }\n\n            // Image file drop area events\n            fileDropArea.addEventListener('dragover', (e) => {\n                e.preventDefault();\n                fileDropArea.classList.add('drag-over');\n            });\n\n            fileDropArea.addEventListener('dragleave', () => {\n                fileDropArea.classList.remove('drag-over');\n            });\n\n            // Make the file drop area clickable\n            fileDropArea.addEventListener('click', () => {\n                previewImageInput.click();\n            });\n\n            fileDropArea.addEventListener('drop', (e) => {\n                e.preventDefault();\n                fileDropArea.classList.remove('drag-over');\n\n                const files = e.dataTransfer.files;\n                if (files.length) {\n                    previewImageInput.files = files;\n                    handlePreviewImage(files[0]);\n                }\n            });\n\n            // File input change event\n            previewImageInput.addEventListener('change', (e) => {\n                if (e.target.files.length) {\n                    handlePreviewImage(e.target.files[0]);\n                }\n            });\n\n            // Remove preview button\n            removePreviewBtn.addEventListener('click', () => {\n                previewImageInput.value = '';\n                previewContainer.style.display = 'none';\n                fileDropArea.style.display = 'block';\n            });\n\n            // Handle preview image display\n            function handlePreviewImage(file) {\n                if (file && file.type.startsWith('image/')) {\n                    const reader = new FileReader();\n                    reader.onload = (e) => {\n                        previewImg.src = e.target.result;\n                        previewContainer.style.display = 'block';\n                        fileDropArea.style.display = 'none';\n                    };\n                    reader.readAsDataURL(file);\n                }\n            }\n        });\n    </script>\n</body>\n</html>`;\n\n  return new Response(html, {\n    headers: { \"Content-Type\": \"text/html\" },\n  });\n}\n\nexport async function handleThemeSubmission(request) {\n  const env = request.env;\n\n  try {\n    const formData = await request.formData();\n    const themeData = formData.get(\"themeData\");\n    const previewImage = formData.get(\"previewImage\");\n\n    if (!themeData) {\n      const baseUrl = new URL(request.url).origin;\n      return Response.redirect(\n        `${baseUrl}/submit?error=1&message=Please provide theme data`,\n        302,\n      );\n    }\n\n    // Validate GitHub env configuration\n    const missing = [];\n    if (!env.GITHUB_TOKEN) missing.push(\"GITHUB_TOKEN\");\n    if (!env.GITHUB_OWNER) missing.push(\"GITHUB_OWNER\");\n    if (!env.GITHUB_REPO) missing.push(\"GITHUB_REPO\");\n    if (missing.length) {\n      console.error(\"Missing GitHub ENV:\", missing.join(\", \"));\n      const baseUrl = new URL(request.url).origin;\n      return Response.redirect(\n        `${baseUrl}/submit?error=1&message=Missing GitHub configuration on server: ${encodeURIComponent(missing.join(\", \"))}`,\n        302,\n      );\n    }\n\n    let theme;\n    try {\n      theme = JSON.parse(themeData);\n    } catch (e) {\n      const baseUrl = new URL(request.url).origin;\n      return Response.redirect(\n        `${baseUrl}/submit?error=1&message=${encodeURIComponent(\"Invalid JSON format: \" + e.message)}`,\n        302,\n      );\n    }\n\n    // Add required fields\n    if (!theme.name) {\n      theme.name = \"Untitled Theme\";\n    }\n    if (!theme.description) {\n      theme.description = \"No description provided\";\n    }\n\n    // Add metadata\n    theme.createdAt = new Date().toISOString().split(\"T\")[0];\n\n    // Handle preview image if uploaded\n    if (previewImage && previewImage.size > 0) {\n      const arrayBuffer = await previewImage.arrayBuffer();\n      const uint8Array = new Uint8Array(arrayBuffer);\n      // Chunked base64 encoding to avoid call stack overflow\n      function uint8ToBase64(u8) {\n        let binary = \"\";\n        const chunkSize = 0x8000; // 32KB\n        for (let i = 0; i < u8.length; i += chunkSize) {\n          const chunk = u8.subarray(i, i + chunkSize);\n          binary += String.fromCharCode.apply(null, chunk);\n        }\n        return btoa(binary);\n      }\n      const base64String = uint8ToBase64(uint8Array);\n      theme.previewImage = `${previewImage.type};base64,${base64String}`;\n    }\n\n    const themeId = await saveThemeToGitHub(env, theme, \"pending\");\n\n    const baseUrl = new URL(request.url).origin;\n    if (themeId) {\n      return Response.redirect(\n        `${baseUrl}/submit?message=${encodeURIComponent(\"Theme submitted successfully! Awaiting admin approval.\")}`,\n        302,\n      );\n    } else {\n      return Response.redirect(\n        `${baseUrl}/submit?error=1&message=${encodeURIComponent(\"Error saving theme to GitHub. Check server logs for details.\")}`,\n        302,\n      );\n    }\n  } catch (error) {\n    console.error(\"Theme submission error:\", error);\n    const baseUrl = new URL(request.url).origin;\n    return Response.redirect(\n      `${baseUrl}/submit?error=1&message=${encodeURIComponent(\"Unexpected server error during submission.\")}`,\n      302,\n    );\n  }\n}\n\nexport async function showThemeDetails(request) {\n  const env = request.env;\n  const { id } = request.params;\n\n  try {\n    const theme = await getThemeFromGitHub(env, id, \"approved\");\n\n    if (!theme) {\n      // Try pending themes\n      const pendingTheme = await getThemeFromGitHub(env, id, \"pending\");\n      if (pendingTheme) {\n        return new Response(\"Theme is pending approval\", { status: 403 });\n      }\n      console.warn(\"Theme not found in approved or pending for id:\", id);\n      return new Response(\"Theme not found\", { status: 404 });\n    }\n\n    // Generate direct GitHub raw URL\n    const rawUrl = `https://raw.githubusercontent.com/${env.GITHUB_OWNER}/${env.GITHUB_REPO}/main/themes/approved/${encodeURIComponent(id)}.json`;\n\n    const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${theme.name} - ThemeHub</title>\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap\">\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap\">\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\" />\n    <link rel=\"icon\" href=\"/favicon.png?v=2\" type=\"image/png\">\n    ${sharedStyles}\n    <style>\n        .hero-preview {\n            max-width: 820px;\n            width: 100%;\n            aspect-ratio: 16 / 9;\n            border-radius: 12px;\n            overflow: hidden;\n            background: var(--md-sys-color-surface-variant);\n            border: 1px solid var(--md-sys-color-outline);\n            box-shadow: 0 2px 10px var(--md-sys-color-shadow);\n            margin: 0 auto 20px auto;\n        }\n        .hero-preview.portrait { aspect-ratio: 9 / 16; max-width: 420px; }\n        .hero-preview img {\n            width: 100%;\n            height: 100%;\n            display: block;\n            object-fit: cover;\n            object-position: center;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"notification\" class=\"notification\">Link copied to clipboard!</div>\n\n    ${getNavbarHtml(\"home\", false)}\n\n    <main>\n        <div class=\"container\">\n            <div class=\"page-header\">\n                <h1><span class=\"material-symbols-outlined\">brush</span> ${theme.name}</h1>\n                <div class=\"theme-meta\">\n                    <span><span class=\"material-symbols-outlined\">calendar_today</span> Created: ${theme.createdAt || \"Unknown\"}</span>\n                </div>\n            </div>\n\n            ${\n              theme.previewUrl\n                ? `\n            <div class=\"hero-preview\" id=\"detailHeroPreview\">\n                <img src=\"${theme.previewUrl}\" alt=\"${theme.name} Preview\" id=\"detailHeroImage\">\n            </div>\n            `\n                : \"\"\n            }\n\n            <div class=\"card\">\n                <h2>Theme Description</h2>\n                <p>${theme.description}</p>\n            </div>\n\n            <div class=\"card\">\n                <h2><span class=\"material-symbols-outlined\">link</span> Direct GitHub Raw Link</h2>\n                <div class=\"raw-link\" id=\"rawLink\" style=\"background: var(--md-sys-color-surface-variant); padding: 15px; border-radius: 6px; font-family: 'Roboto Mono', monospace; font-size: 0.9rem; color: var(--md-sys-color-on-surface-variant); border: 1px solid var(--md-sys-color-outline); margin: 15px 0; word-break: break-all;\">${rawUrl}</div>\n                <button class=\"btn btn-copy\" onclick=\"copyRawLink()\">\n                    <span class=\"material-symbols-outlined\">content_copy</span> Copy Raw Link\n                </button>\n            </div>\n\n            <div class=\"card\">\n                <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;\">\n                    <h2><span class=\"material-symbols-outlined\">code</span> Theme JSON</h2>\n                    <button class=\"btn btn-copy\" onclick=\"copyJSON()\">\n                        <span class=\"material-symbols-outlined\">content_copy</span> Copy JSON\n                    </button>\n                </div>\n                <pre id=\"themeJSON\" style=\"background: var(--md-sys-color-surface-variant); padding: 20px; border-radius: 6px; overflow-x: auto; font-family: 'Roboto Mono', monospace; font-size: 0.9rem; color: var(--md-sys-color-on-surface-variant); border: 1px solid var(--md-sys-color-outline);\">${JSON.stringify(theme, null, 2)}</pre>\n            </div>\n\n            <div style=\"text-align: center; margin: 30px 0;\" class=\"theme-actions\">\\n                <button class=\"btn btn-filled\" onclick=\"copyThemeLink('${id}')\">\\n                    <span class=\"material-symbols-outlined\">link</span> Copy Raw GitHub Link\\n                </button>\\n\n                <a href=\"/\" class=\"btn btn-outlined\">\n                    <span class=\"material-symbols-outlined\">arrow_back</span> Back to Themes\n                </a>\n            </div>\n        </div>\n    </main>\n\n    <footer>\n        <div class=\"container\">\n            <p>&copy; 2023 ThemeHub. Professional Theme Marketplace.</p>\n        </div>\n    </footer>\n\n    <script>\n        document.addEventListener('DOMContentLoaded', function() {\n            // Oznacz portretowe obrazy na li\u015Bcie\n            document.querySelectorAll('.theme-preview img').forEach(function(img){\n                if (img.complete) markOrientation(img);\n                else img.addEventListener('load', function(){ markOrientation(img); }, { once: true });\n            });\n            function markOrientation(img){\n                try {\n                    if (img.naturalHeight > img.naturalWidth) {\n                        const parent = img.closest('.theme-preview');\n                        if (parent) parent.classList.add('portrait');\n                    }\n                } catch(_){}\n            }\n            // Oznacz podgl\u0105d na stronie szczeg\u00F3\u0142\u00F3w\n            const detailImg = document.getElementById('detailHeroImage');\n            const detailWrap = document.getElementById('detailHeroPreview');\n            if (detailImg && detailWrap) {\n                const apply = () => { if (detailImg.naturalHeight > detailImg.naturalWidth) detailWrap.classList.add('portrait'); };\n                if (detailImg.complete) apply(); else detailImg.addEventListener('load', apply, { once: true });\n            }\n            });\n    </script>\n</body>\n</html>`;\n\n    return new Response(html, {\n      headers: { \"Content-Type\": \"text/html\" },\n    });\n  } catch (error) {\n    console.error(\"Error loading theme details:\", error);\n    return new Response(\"Error loading theme\", { status: 500 });\n  }\n}\n\nexport async function downloadThemeJSON(request) {\n  const env = request.env;\n  const { id } = request.params;\n\n  try {\n    // Try approved first\n    let theme = await getThemeFromGitHub(env, id, \"approved\");\n    let status = \"approved\";\n\n    if (!theme) {\n      // Try pending\n      theme = await getThemeFromGitHub(env, id, \"pending\");\n      status = \"pending\";\n    }\n\n    if (!theme) {\n      return new Response(\"Theme not found\", { status: 404 });\n    }\n\n    const jsonContent = JSON.stringify(theme, null, 2);\n    const filename = `${theme.name.replace(/[^a-z0-9]/gi, \"_\").toLowerCase()}_${id}.json`;\n\n    return new Response(jsonContent, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Content-Disposition\": `attachment; filename=\"${filename}\"`,\n      },\n    });\n  } catch (error) {\n    console.error(\"Download error:\", error);\n    return new Response(\"Error downloading theme\", { status: 500 });\n  }\n}\n", "// Middleware to protect admin routes\nexport async function requireAuth(request, env) {\n    const token = getCookie(request.headers.get('Cookie'), 'token');\n\n    // Check if the token exists and matches the admin password\n    if (!token || token !== env.ADMIN_PASSWORD) {\n        const baseUrl = new URL(request.url).origin;\n        return Response.redirect(`${baseUrl}/admin/login`, 302);\n    }\n}\n\n// Reusable function to check if the user is authenticated\nexport function isAdminAuthenticated(request, env) {\n    const token = getCookie(request.headers.get('Cookie'), 'token');\n    return token && token === env.ADMIN_PASSWORD;\n}\n\n// Helper to get cookie value by name\nexport function getCookie(cookieString, name) {\n    if (!cookieString) {\n        return null;\n    }\n    const cookies = cookieString.split(';');\n    for (const cookie of cookies) {\n        const [cookieName, cookieValue] = cookie.trim().split('=');\n        if (cookieName === name) {\n            return cookieValue;\n        }\n    }\n    return null;\n}", "import {\n  getAllThemesFromGitHub,\n  moveThemeBetweenStatuses,\n  deleteThemeFromGitHub,\n} from \"../utils/github.js\";\nimport { getNavbarHtml, sharedStyles } from \"./public.js\";\nimport { isAdminAuthenticated } from \"./auth.js\";\n\n// Handler for showing the admin login page\nexport async function showAdminLoginPage(request) {\n  const url = new URL(request.url);\n  const error = url.searchParams.get(\"error\");\n\n  const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Login - ThemeHub</title>\n    ${sharedStyles}\n    <style>\n        body.dark-mode {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            min-height: 100vh;\n            background-color: var(--md-sys-color-background);\n            font-family: 'Roboto', sans-serif;\n        }\n\n        .login-card {\n            background-color: var(--md-sys-color-surface);\n            padding: 2rem;\n            border-radius: 16px;\n            box-shadow: 0 1px 3px var(--md-sys-color-shadow);\n            max-width: 400px;\n            width: 100%;\n            text-align: center;\n            border: 1px solid var(--md-sys-color-outline);\n        }\n\n        .login-card h2 {\n            margin-top: 0;\n            color: var(--text-color);\n        }\n\n        .form-group {\n            margin-bottom: 1.5rem;\n            text-align: left;\n        }\n\n        .form-group label {\n            display: block;\n            margin-bottom: 0.5rem;\n            font-weight: 500;\n            color: var(--secondary-text);\n        }\n\n        .form-group input {\n            width: 100%;\n            padding: 0.75rem;\n            border: 1px solid var(--border-color);\n            border-radius: 8px;\n            background-color: var(--secondary-bg);\n            color: var(--text-color);\n            box-sizing: border-box;\n            transition: border-color 0.2s ease;\n        }\n\n        .form-group input:focus {\n            outline: none;\n            border-color: var(--accent-color);\n        }\n\n        .error-message {\n            color: #dc3545;\n            margin-bottom: 1rem;\n        }\n    </style>\n</head>\n<body class=\"dark-mode\">\n    <div class=\"login-card\">\n        <h2>Admin Login</h2>\n        ${error ? `<p class=\"error-message\">Invalid password. Please try again.</p>` : \"\"}\n        <form\n         action=\"/admin/login\"\n         method=\"POST\"\n        >\n         <div class=\"form-group\">\n          <label for=\"password\">Password</label>\n          <input\n           type=\"password\"\n           id=\"password\"\n           name=\"password\"\n           required\n          >\n         </div>\n         <button type=\"submit\" class=\"btn btn-filled\" style=\"width: 100%;\">Login</button>\n        </form>\n    </div>\n</body>\n</html>`;\n  return new Response(html, {\n    headers: { \"Content-Type\": \"text/html\" },\n  });\n}\n\n// Handler for handling admin login logic\nexport async function handleAdminLogin(request, env) {\n  const formData = await request.formData();\n  const password = formData.get(\"password\");\n  const { ADMIN_PASSWORD } = env;\n\n  if (password === ADMIN_PASSWORD) {\n    // Successful login, set a cookie and redirect\n    const headers = new Headers();\n    headers.set(\n      \"Set-Cookie\",\n      `token=${ADMIN_PASSWORD}; Path=/admin; HttpOnly; SameSite=Strict`,\n    );\n    headers.set(\"Location\", \"/admin/dashboard\");\n    return new Response(null, { status: 302, headers });\n  } else {\n    // Failed login, redirect back with an error message\n    const url = new URL(request.url).origin;\n    return Response.redirect(`${url}/admin/login?error=true`, 302);\n  }\n}\n\n// Handler for handling admin logout logic\nexport async function handleAdminLogout(request) {\n  const headers = new Headers();\n  // Clear the token cookie\n  headers.set(\n    \"Set-Cookie\",\n    \"token=; Path=/admin; HttpOnly; SameSite=Strict; Max-Age=0\",\n  );\n  headers.set(\"Location\", \"/\"); // Redirect to home page\n  return new Response(null, { status: 302, headers });\n}\n\n// Handler for showing the main admin dashboard\nexport async function showAdminDashboard(request, env) {\n  const isAdmin = isAdminAuthenticated(request, env);\n  const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Dashboard - ThemeHub</title>\n    ${sharedStyles}\n    <style>\n        .admin-dashboard-card {\n            max-width: 800px;\n            margin: 2rem auto;\n            text-align: center;\n        }\n\n        .admin-links {\n            display: flex;\n            justify-content: center;\n            gap: 1.5rem;\n            margin-top: 2rem;\n        }\n        .admin-links .button {\n            text-decoration: none;\n            flex: 1;\n            text-align: center;\n        }\n    </style>\n</head>\n<body>\n    ${getNavbarHtml(\"admin\", isAdmin)}\n    <main class=\"content container\">\n        <div class=\"admin-dashboard-card\">\n            <h2>Admin Dashboard</h2>\n            <p>Welcome to the admin panel. Manage pending and approved themes.</p>\n            <div class=\"admin-links\">\n                <a href=\"/admin/pending\" class=\"btn btn-filled\">\n                    <span class=\"material-symbols-outlined\">pending</span>\n                    <span>Pending Themes</span>\n                </a>\n                <a href=\"/admin/approved\" class=\"btn btn-filled\">\n                    <span class=\"material-symbols-outlined\">check_circle</span>\n                    <span>Approved Themes</span>\n                </a>\n            </div>\n        </div>\n    </main>\n    <script>\n        // Theme toggle functionality\n        const themeToggle = document.getElementById('themeToggle');\n        if (themeToggle) {\n            themeToggle.addEventListener('click', () => {\n                document.body.classList.toggle('dark-mode');\n                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');\n            });\n        }\n\n        const savedTheme = localStorage.getItem('theme');\n        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {\n            document.body.classList.add('dark-mode');\n        }\n    </script>\n</body>\n</html>`;\n  return new Response(html, {\n    headers: { \"Content-Type\": \"text/html\" },\n  });\n}\n\n// Handler for showing pending themes\nexport async function showPendingThemes(request, env) {\n  const isAdmin = isAdminAuthenticated(request, env);\n  try {\n    const pendingThemes = await getAllThemesFromGitHub(env, \"pending\");\n    const themeCards = pendingThemes\n      .map(\n        (theme) => `\n            <div class=\"theme-card\">\n                <h3>${theme.name}</h3>\n                <p>${theme.description}</p>\n                <p><strong>ID:</strong> ${theme.id}</p>\n                <div style=\"display: flex; gap: 0.5rem; margin-top: 1rem; align-items: center;\">\n                    <button class=\"btn btn-filled\" onclick=\"copyThemeLink('${theme.id}')\" style=\"margin-right: 0.5rem;\">Copy Link</button>\n                    <form method=\"POST\" action=\"/admin/approve/${theme.id}\" style=\"display: inline;\">\n                        <button type=\"submit\" class=\"btn btn-filled\">Approve</button>\n                    </form>\n                    <form method=\"POST\" action=\"/admin/reject/${theme.id}\" style=\"display: inline;\">\n                        <button type=\"submit\" class=\"btn btn-error\">Reject</button>\n                    </form>\n                </div>\n            </div>\n        `,\n      )\n      .join(\"\");\n\n    const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Pending Themes - ThemeHub</title>\n    ${sharedStyles}\n    <style>\n        body.dark-mode {\n            background-color: var(--md-sys-color-background);\n            color: var(--md-sys-color-on-surface);\n        }\n\n        .grid-container {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n            gap: 1.5rem;\n            margin-top: 2rem;\n        }\n\n        .theme-card {\n            background-color: var(--md-sys-color-surface-variant);\n            padding: 1.5rem;\n            border-radius: 12px;\n            box-shadow: 0 1px 3px var(--md-sys-color-shadow);\n            border: 1px solid var(--md-sys-color-outline);\n        }\n\n        .theme-card h3 {\n            margin-top: 0;\n            color: var(--md-sys-color-on-surface);\n        }\n\n        .theme-card p {\n            color: var(--md-sys-color-on-surface-variant);\n        }\n\n        .btn-error {\n            background-color: var(--md-sys-color-error);\n            color: var(--md-sys-color-on-error);\n        }\n\n        .btn-error:hover {\n            background-color: var(--md-sys-color-error-container);\n            transform: translateY(-2px);\n        }\n    </style>\n</head>\n<body class=\"dark-mode\">\n    ${getNavbarHtml(\"admin\", isAdmin)}\n    <main class=\"content container\">\n        <h2>Pending Themes</h2>\n        <p>Review new themes submitted by users.</p>\n        <div class=\"grid-container\">\n            ${themeCards.length > 0 ? themeCards : \"<p>No pending themes to review.</p>\"}\n        </div>\n        <div id=\"notification\" class=\"notification\"></div>\n    </main>\n    <script>\n        // Theme toggle functionality\n        const themeToggle = document.getElementById('themeToggle');\n        if (themeToggle) {\n            themeToggle.addEventListener('click', () => {\n                document.body.classList.toggle('dark-mode');\n                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');\n            });\n        }\n\n        const savedTheme = localStorage.getItem('theme');\n        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {\n            document.body.classList.add('dark-mode');\n        }\n\n        function copyThemeLink(themeId) {\n            const link = \"https://raw.githubusercontent.com/${env.GITHUB_OWNER}/${env.GITHUB_REPO}/refs/heads/main/themes/pending/\" + themeId + \".json\";\n            navigator.clipboard.writeText(link).then(() => {\n                const notification = document.getElementById('notification');\n                notification.textContent = 'Raw GitHub link copied to clipboard!';\n                notification.classList.add('show');\n                setTimeout(() => {\n                    notification.classList.remove('show');\n                }, 3000);\n            }).catch(err => {\n                console.error('Failed to copy: ', err);\n            });\n        }\n\n        // Make env variables available to the copy function\n        window.env = {\n            GITHUB_OWNER: \"${env.GITHUB_OWNER}\",\n            GITHUB_REPO: \"${env.GITHUB_REPO}\"\n        };\n    </script>\n</body>\n</html>`;\n    return new Response(html, {\n      headers: { \"Content-Type\": \"text/html\" },\n    });\n  } catch (error) {\n    console.error(\"Error generating HTML response:\", error);\n    return new Response(\"Error generating page\", { status: 500 });\n  }\n}\n\n// Handler for showing approved themes\nexport async function showApprovedThemes(request, env) {\n  const isAdmin = isAdminAuthenticated(request, env);\n  try {\n    const approvedThemes = await getAllThemesFromGitHub(env, \"approved\");\n    const themeCards = approvedThemes\n      .map(\n        (theme) => `\n            <div class=\"theme-card\">\n                <h3>${theme.name}</h3>\n                <p>${theme.description}</p>\n                <p><strong>ID:</strong> ${theme.id}</p>\n                <div style=\"display: flex; gap: 0.5rem; margin-top: 1rem; align-items: center;\">\n                    <form method=\"POST\" action=\"/admin/delete/${theme.id}\" style=\"display: inline;\">\n                        <button type=\"submit\" class=\"btn btn-error\">Delete</button>\n                    </form>\n                </div>\n            </div>\n        `,\n      )\n      .join(\"\");\n\n    const html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Approved Themes - ThemeHub</title>\n    ${sharedStyles}\n    <style>\n        body.dark-mode {\n            background-color: var(--md-sys-color-background);\n            color: var(--md-sys-color-on-surface);\n        }\n\n        .grid-container {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n            gap: 1.5rem;\n            margin-top: 2rem;\n        }\n\n        .theme-card {\n            background-color: var(--md-sys-color-surface-variant);\n            padding: 1.5rem;\n            border-radius: 12px;\n            box-shadow: 0 1px 3px var(--md-sys-color-shadow);\n            border: 1px solid var(--md-sys-color-outline);\n        }\n\n        .theme-card h3 {\n            margin-top: 0;\n            color: var(--md-sys-color-on-surface);\n        }\n\n        .theme-card p {\n            color: var(--md-sys-color-on-surface-variant);\n        }\n    </style>\n</head>\n<body class=\"dark-mode\">\n    ${getNavbarHtml(\"admin\", isAdmin)}\n    <main class=\"content container\">\n        <h2>Approved Themes</h2>\n        <p>Manage themes that have been approved.</p>\n        <div class=\"grid-container\">\n            ${themeCards.length > 0 ? themeCards : \"<p>No approved themes found.</p>\"}\n        </div>\n    </main>\n    <script>\n        // Theme toggle functionality\n        const themeToggle = document.getElementById('themeToggle');\n        if (themeToggle) {\n            themeToggle.addEventListener('click', () => {\n                document.body.classList.toggle('dark-mode');\n                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');\n            });\n        }\n\n        const savedTheme = localStorage.getItem('theme');\n        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n        if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {\n            document.body.classList.add('dark-mode');\n        }\n    </script>\n</body>\n</html>`;\n    return new Response(html, {\n      headers: { \"Content-Type\": \"text/html\" },\n    });\n  } catch (error) {\n    console.error(\"Error generating HTML response:\", error);\n    return new Response(\"Error generating page\", { status: 500 });\n  }\n}\n\n// Handler to approve a pending theme\nexport async function approveTheme(request, env) {\n  const { id } = request.params;\n  try {\n    console.log(\"Approve requested for id:\", id);\n    const success = await moveThemeBetweenStatuses(\n      env,\n      id,\n      \"pending\",\n      \"approved\",\n    );\n\n    if (success) {\n      const baseUrl = new URL(request.url).origin;\n      return Response.redirect(`${baseUrl}/admin/pending`, 302);\n    } else {\n      console.error(\"Approve failed for id:\", id);\n      return new Response(`Error approving theme: ${id}`, { status: 500 });\n    }\n  } catch (error) {\n    console.error(\"Approve error:\", error);\n    return new Response(`Error approving theme: ${error.message}`, {\n      status: 500,\n    });\n  }\n}\n\n// Handler to reject a pending theme\nexport async function rejectTheme(request, env) {\n  const { id } = request.params;\n  try {\n    if (!id) {\n      return new Response(\"Theme ID required\", { status: 400 });\n    }\n\n    console.log('\uD83D\uDEAB Attempting to reject theme:', id);\n\n    // Try to move theme to \"rejected\" status first (better approach)\n    try {\n      const moveSuccess = await moveThemeBetweenStatuses(env, id, \"pending\", \"rejected\");\n      if (moveSuccess) {\n        console.log('\u2705 Theme moved to rejected status:', id);\n        const baseUrl = new URL(request.url).origin;\n        return Response.redirect(`${baseUrl}/admin/pending`, 302);\n      }\n    } catch (moveError) {\n      console.warn('\u26A0\uFE0F Failed to move theme to rejected, trying deletion:', moveError.message);\n    }\n\n    // Fallback: try to delete the theme\n    const deleteSuccess = await deleteThemeFromGitHub(env, id, \"pending\");\n    if (deleteSuccess) {\n      console.log('\u2705 Theme deleted (rejected):', id);\n      const baseUrl = new URL(request.url).origin;\n      return Response.redirect(`${baseUrl}/admin/pending`, 302);\n    } else {\n      console.error('\u274C Both move and delete failed for theme:', id);\n      return new Response(\"Error rejecting theme\", { status: 500 });\n    }\n  } catch (error) {\n    console.error(\"Reject error:\", error);\n    return new Response(\"Error rejecting theme\", { status: 500 });\n  }\n}\n\n// Handler to delete an approved theme\nexport async function deleteTheme(request, env) {\n  const { id } = request.params;\n  try {\n    if (!id) {\n      return new Response(\"Theme ID required\", { status: 400 });\n    }\n    const success = await deleteThemeFromGitHub(env, id, \"approved\");\n    if (success) {\n      const baseUrl = new URL(request.url).origin;\n      return Response.redirect(`${baseUrl}/admin/approved`, 302);\n    } else {\n      return new Response(\"Error deleting theme\", { status: 500 });\n    }\n  } catch (error) {\n    console.error(\"Delete error:\", error);\n    return new Response(\"Error deleting theme\", { status: 500 });\n  }\n}\n", "export async function showBuildingPage(request, env) {\n  const htmlContent = `<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Fizz Theme Studio \u2014 Alpha JSON Builder</title>\n<style>\n  :root{\n    --brand:#2ea8ff; --brandHover:#166dce;\n    --text:#d6e8ff; --muted:#a8c6ff; --textPrimary:#e7f1ff; --textSecond:#b9d4ff; --link:#2ea8ff;\n    --bgPrimary:#0f0f10; --bgSecondary:#121214; --bgAlt:#101012; --bgTertiary:#0c0c0e; --bgFloating:#0f0f12; --bgNested:#0e0e10;\n    --cardPrimary:#0e0e10; --cardSecondary:#0f0f12; --input:#121214;\n    --success:#43b581; --warning:#f5b14d; --danger:#e04f5f;\n    --ripple:#2a5d9c; --scrollbar:#2b2b2b;\n  }\n  *{box-sizing:border-box}\n  html,body{height:100%;margin:0;background:var(--bgPrimary);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}\n  .app{display:grid;grid-template-columns:340px 1fr;gap:0;height:100%}\n  .panel{background:var(--bgSecondary);border-right:1px solid rgba(255,255,255,.05);padding:14px;overflow:auto}\n  .panel h1{font-size:18px;margin:0;color:var(--textPrimary)}\n  .panel h2{font-size:13px;margin:18px 0 6px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}\n  .panel-header{display: flex; align-items: center; gap: 8px; margin-bottom: 8px;}\n  .row{display:grid;grid-template-columns:1fr 120px;gap:8px;align-items:center;margin:6px 0}\n  .row label{font-size:13px;color:var(--text)}\n  .row input[type=\"text\"]{width:100%;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.07);background:var(--input);color:var(--text)}\n  .row input[type=\"color\"]{width:100%;height:36px;border:1px solid rgba(255,255,255,.15);border-radius:8px;background:#0000}\n  .btns{display:flex;gap:8px;margin:12px 0;flex-wrap:wrap}\n  button{padding:8px 10px;border:1px solid rgba(255,255,255,.15);border-radius:8px;background:var(--bgAlt);color:var(--text);cursor:pointer}\n  button.primary{background:var(--brand);border-color:transparent;color:#04121e;font-weight:600}\n  button:active{transform:translateY(1px)}\n  .preview{display:grid;grid-template-columns:64px 260px 1fr;height:100vh;overflow:hidden}\n  .sv{background:var(--bgTertiary);display:flex;flex-direction:column;gap:6px;align-items:center;padding:8px 0;border-right:1px solid rgba(255,255,255,.05)}\n  .sv .dot{width:38px;height:38px;border-radius:50%;background:linear-gradient(145deg,var(--bgAlt),var(--bgSecondary));border:1px solid rgba(255,255,255,.06)}\n  .channels{background:var(--bgSecondary);border-right:1px solid rgba(255,255,255,.05);padding:10px;overflow:auto}\n  .channels h3{font-size:12px;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);margin:8px 0}\n  .chan{display:flex;gap:8px;align-items:center;padding:6px 8px;border-radius:8px;color:var(--muted)}\n  .chan.active{background:var(--bgAlt);color:var(--text)}\n  .chan .hash{opacity:.7}\n  .chat{display:grid;grid-template-rows:auto 1fr auto;height:100%}\n  .header{display:flex;align-items:center;gap:10px;padding:12px;border-bottom:1px solid rgba(255,255,255,.05);background:var(--bgFloating)}\n  .header .title{font-weight:600;color:var(--textPrimary)}\n  .header .pill{margin-left:auto;background:var(--bgAlt);padding:6px 8px;border-radius:999px;color:var(--muted);font-size:12px}\n  .msgs{padding:14px;overflow:auto;background:var(--bgPrimary)}\n  .msg{margin:10px 0}\n  .nick{color:var(--textPrimary);font-weight:600;margin-right:6px}\n  .time{color:var(--muted);font-size:12px;margin-left:6px}\n  .bubble{background:var(--cardPrimary);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:10px 12px;display:inline-block}\n  a{color:var(--link);text-decoration:none}\n  a:hover{color:var(--brandHover)}\n  code{background:var(--bgAlt);padding:2px 6px;border-radius:6px;border:1px solid rgba(255,255,255,.08);color:var(--text)}\n  .quote{border-left:3px solid rgba(255,255,255,.15);padding-left:10px;color:var(--muted)}\n  .mention{color:var(--brand);font-weight:700}\n  .spoiler{background:var(--bgAlt);color:var(--bgAlt);padding:2px 6px;border-radius:6px}\n  .spoiler:hover{color:var(--text)}\n  .input{padding:10px;border-top:1px solid rgba(255,255,255,.05);background:var(--input);display:flex;gap:8px}\n  .input input{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,.08);background:var(--bgAlt);color:var(--text)}\n  .json{margin-top:10px}\n  textarea{width:100%;min-height:220px;background:#0b0b0d;color:#d0d0d5;border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:10px;font:12px/1.5 ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}\n  .mini{font-size:12px;color:var(--muted);margin:6px 0 0}\n  .hr{height:1px;background:rgba(255,255,255,.06);margin:10px 0}\n  @media (max-width: 980px){ .app{grid-template-columns:1fr} .preview{display:none} }\n</style>\n</head>\n<body>\n<div class=\"app\">\n  <div class=\"panel\">\n    <div class=\"panel-header\">\n      <a href=\"/\"><button>Go Back</button></a>\n      <h1>Theme Studio by <a href=\"https://github.com/FizzvrDev\">Fizz</a></h1>\n    </div>\n    <div class=\"btns\">\n      <button id=\"preset-blue\" class=\"primary\">Preset: Pastel Blue</button>\n      <button id=\"preset-purple\">Preset: Purple Vision</button>\n    </div>\n\n    <h2>Meta</h2>\n    <div class=\"row\"><label>Name</label><input id=\"name\" type=\"text\" value=\"Cobalt Vision (Alpha Dark)\"/></div>\n    <div class=\"row\"><label>Description</label><input id=\"desc\" type=\"text\" value=\"Midnight alpha schema with a cobalt/azure palette. Dark server list + dark chat, crisp blue accents.\"/></div>\n    <div class=\"row\"><label>Version</label><input id=\"ver\" type=\"text\" value=\"3\"/></div>\n    <div class=\"row\"><label>Icon Pack</label><input id=\"iconPack\" type=\"text\" value=\"rosiecord-plumpy\"/></div>\n\n    <h2>Authors</h2>\n    <div class=\"row\"><label>Author 1 name</label><input id=\"a1n\" type=\"text\" value=\"hi\"/></div>\n    <div class=\"row\"><label>Author 1 id</label><input id=\"a1i\" type=\"text\" value=\"Fizz was here\"/></div>\n\n\n    <h2>Accent & Text</h2>\n    <div class=\"row\"><label>Brand</label><input id=\"brand\" type=\"color\" value=\"#2ea8ff\"/></div>\n    <div class=\"row\"><label>Brand Hover</label><input id=\"brandHover\" type=\"color\" value=\"#166dce\"/></div>\n    <div class=\"row\"><label>Text Normal</label><input id=\"text\" type=\"color\" value=\"#d6e8ff\"/></div>\n    <div class=\"row\"><label>Text Muted</label><input id=\"muted\" type=\"color\" value=\"#a8c6ff\"/></div>\n    <div class=\"row\"><label>Text Primary</label><input id=\"textPrimary\" type=\"color\" value=\"#e7f1ff\"/></div>\n    <div class=\"row\"><label>Text Secondary</label><input id=\"textSecond\" type=\"color\" value=\"#b9d4ff\"/></div>\n    <div class=\"row\"><label>Link</label><input id=\"link\" type=\"color\" value=\"#2ea8ff\"/></div>\n\n    <h2>Surfaces</h2>\n    <div class=\"row\"><label>Background Primary</label><input id=\"bgPrimary\" type=\"color\" value=\"#0f0f10\"/></div>\n    <div class=\"row\"><label>Background Secondary</label><input id=\"bgSecondary\" type=\"color\" value=\"#121214\"/></div>\n    <div class=\"row\"><label>Background Alt</label><input id=\"bgAlt\" type=\"color\" value=\"#101012\"/></div>\n    <div class=\"row\"><label>Background Tertiary</label><input id=\"bgTertiary\" type=\"color\" value=\"#0c0c0e\"/></div>\n    <div class=\"row\"><label>Floating</label><input id=\"bgFloating\" type=\"color\" value=\"#0f0f12\"/></div>\n    <div class=\"row\"><label>Nested</label><input id=\"bgNested\" type=\"color\" value=\"#0e0e10\"/></div>\n\n    <h2>Cards & Inputs</h2>\n    <div class=\"row\"><label>Card Primary</label><input id=\"cardPrimary\" type=\"color\" value=\"#0e0e10\"/></div>\n    <div class=\"row\"><label>Card Secondary</label><input id=\"cardSecondary\" type=\"color\" value=\"#0f0f12\"/></div>\n    <div class=\"row\"><label>Input</label><input id=\"input\" type=\"color\" value=\"#121214\"/></div>\n\n    <h2>Status</h2>\n    <div class=\"row\"><label>Success</label><input id=\"success\" type=\"color\" value=\"#43b581\"/></div>\n    <div class=\"row\"><label>Warning</label><input id=\"warning\" type=\"color\" value=\"#f5b14d\"/></div>\n    <div class=\"row\"><label>Danger</label><input id=\"danger\" type=\"color\" value=\"#e04f5f\"/></div>\n\n    <h2>Misc</h2>\n    <div class=\"row\"><label>Ripple</label><input id=\"ripple\" type=\"color\" value=\"#2a5d9c\"/></div>\n    <div class=\"row\"><label>Scrollbar</label><input id=\"scrollbar\" type=\"color\" value=\"#2b2b2b\"/></div>\n\n    <div class=\"hr\"></div>\n    <div class=\"btns\">\n      <button id=\"copyJson\" class=\"primary\">Copy JSON</button>\n      <button id=\"downloadJson\">Download JSON</button>\n      </div>\n    <div class=\"mini\">Exports Cobalt/Alpha-compatible JSON: arrays-of-one, full ramps, PLUM_*, GUILD_BOOSTING_*, etc.</div>\n\n    <h2>Generated JSON</h2>\n    <div class=\"json\">\n      <textarea id=\"jsonOut\" readonly></textarea>\n    </div>\n  </div>\n\n  <div class=\"preview\">\n    <div class=\"sv\">\n      <div class=\"dot\"></div><div class=\"dot\"></div><div class=\"dot\"></div><div class=\"dot\"></div>\n    </div>\n    <div class=\"channels\">\n      <h3>text channels</h3>\n      <div class=\"chan active\"><span class=\"hash\">#</span><span>general</span></div>\n      <div class=\"chan\"><span class=\"hash\">#</span><span>announcements</span></div>\n      <div class=\"chan\"><span class=\"hash\">#</span><span>showcase</span></div>\n      <div class=\"chan\"><span class=\"hash\">#</span><span>support</span></div>\n      <h3>voice channels</h3>\n      <div class=\"chan\"><span class=\"hash\">\uD83D\uDD0A</span><span>Chill</span></div>\n    </div>\n    <div class=\"chat\">\n      <div class=\"header\">\n        <div class=\"title\"># general</div>\n        <div class=\"pill\">Live Preview</div>\n      </div>\n      <div class=\"msgs\">\n        <div class=\"msg\">\n          <span class=\"nick\">Nova</span><span class=\"time\">Today 12:34</span>\n          <div class=\"bubble\">Check the <a href=\"#\">docs</a> and run <code>npm run build</code>.</div>\n        </div>\n        <div class=\"msg\">\n          <span class=\"nick\">Fizz</span><span class=\"time\">12:36</span>\n          <div class=\"bubble\"><span class=\"mention\">@you</span> &gt; Quote looks like this<br><span class=\"quote\">Nested quote with muted text</span></div>\n        </div>\n        <div class=\"msg\">\n          <span class=\"nick\">Luna</span><span class=\"time\">12:38</span>\n          <div class=\"bubble\">Spoiler: <span class=\"spoiler\">secret</span> \u2014 selected/hover states test.</div>\n        </div>\n      </div>\n      <div class=\"input\">\n        <input placeholder=\"Message #general\"/>\n        <button class=\"primary\">Send</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<script>\nconst $ = s => document.querySelector(s);\n\n// Defaults to prevent blanks\nconst DEFAULTS = {\n  brand:\"#2ea8ff\", brandHover:\"#166dce\",\n  textNormal:\"#d6e8ff\", textMuted:\"#a8c6ff\", textPrimary:\"#e7f1ff\", textSecond:\"#b9d4ff\", textLink:\"#2ea8ff\",\n  bgPrimary:\"#0f0f10\", bgSecondary:\"#121214\", bgAlt:\"#101012\", bgTertiary:\"#0c0c0e\", bgFloating:\"#0f0f12\", bgNested:\"#0e0e10\",\n  cardPrimary:\"#0e0e10\", cardSecondary:\"#0f0f12\", input:\"#121214\",\n  success:\"#43b581\", warning:\"#f5b14d\", danger:\"#e04f5f\",\n  ripple:\"#2a5d9c\", scrollbar:\"#2b2b2b\",\n  name:\"Cobalt Vision (Alpha Dark)\",\n  description:\"Midnight alpha schema with a cobalt/azure palette. Dark server list + dark chat, crisp blue accents.\",\n  version:\"3\",\n  iconPack:\"rosiecord-plumpy\",\n  mentionLine:\"#8ecbff\"\n};\nconst getVal = (id, key) => {\n  const v = (document.getElementById(id)?.value ?? \"\").trim();\n  return v || DEFAULTS[key];\n};\n\n// Hook inputs\nconst fields = [\n  \"brand\",\"brandHover\",\"text\",\"muted\",\"textPrimary\",\"textSecond\",\"link\",\n  \"bgPrimary\",\"bgSecondary\",\"bgAlt\",\"bgTertiary\",\"bgFloating\",\"bgNested\",\n  \"cardPrimary\",\"cardSecondary\",\"input\",\"success\",\"warning\",\"danger\",\"ripple\",\"scrollbar\"\n];\nfor (const k of fields) { const el=document.getElementById(k); if(el) el.addEventListener(\"input\", applyVars); }\n[\"name\",\"desc\",\"ver\",\"iconPack\",\"a1n\",\"a1i\",\"a2n\",\"a2i\"].forEach(id => { const el=document.getElementById(id); if(el) el.addEventListener(\"input\", buildJSON); });\n\n// Presets\ndocument.getElementById(\"preset-blue\").addEventListener(\"click\", ()=>{\n  const p={brand:\"#2ea8ff\",brandHover:\"#166dce\",text:\"#d6e8ff\",muted:\"#a8c6ff\",textPrimary:\"#e7f1ff\",textSecond:\"#b9d4ff\",link:\"#2ea8ff\",\n    bgPrimary:\"#0f0f10\",bgSecondary:\"#121214\",bgAlt:\"#101012\",bgTertiary:\"#0c0c0e\",bgFloating:\"#0f0f12\",bgNested:\"#0e0e10\",\n    cardPrimary:\"#0e0e10\",cardSecondary:\"#0f0f12\",input:\"#121214\",success:\"#43b581\",warning:\"#f5b14d\",danger:\"#e04f5f\",ripple:\"#2a5d9c\",scrollbar:\"#2b2b2b\"};\n  for(const k in p){ const el=document.getElementById(k); if(el) el.value=p[k]; } applyVars();\n});\ndocument.getElementById(\"preset-purple\").addEventListener(\"click\", ()=>{\n  const p={brand:\"#8200c8\",brandHover:\"#3d007a\",text:\"#cbadff\",muted:\"#d359ff\",textPrimary:\"#e9d9ff\",textSecond:\"#d79dff\",link:\"#8200c8\",\n    bgPrimary:\"#0f0f10\",bgSecondary:\"#121214\",bgAlt:\"#101012\",bgTertiary:\"#0c0c0e\",bgFloating:\"#0f0f12\",bgNested:\"#0e0e10\",\n    cardPrimary:\"#0e0e10\",cardSecondary:\"#0f0f12\",input:\"#121214\",success:\"#43b581\",warning:\"#faa61a\",danger:\"#7f007b\",ripple:\"#5b2a82\",scrollbar:\"#2b2b2b\"};\n  for(const k in p){ const el=document.getElementById(k); if(el) el.value=p[k]; } applyVars();\n});\n\nfunction applyVars(){\n  for (const k of fields) {\n    const el = document.getElementById(k);\n    if (!el) continue;\n    document.documentElement.style.setProperty(\"--\"+k, el.value);\n  }\n  buildJSON();\n}\nfunction A(v){ return [v]; }\n\nfunction buildJSON(){\n  const P = {\n    brand:getVal(\"brand\",\"brand\"),\n    brandHover:getVal(\"brandHover\",\"brandHover\"),\n    textNormal:getVal(\"text\",\"textNormal\"),\n    textMuted:getVal(\"muted\",\"textMuted\"),\n    textPrimary:getVal(\"textPrimary\",\"textPrimary\"),\n    textSecond:getVal(\"textSecond\",\"textSecond\"),\n    textLink:getVal(\"link\",\"textLink\"),\n    bgPrimary:getVal(\"bgPrimary\",\"bgPrimary\"),\n    bgSecondary:getVal(\"bgSecondary\",\"bgSecondary\"),\n    bgAlt:getVal(\"bgAlt\",\"bgAlt\"),\n    bgTertiary:getVal(\"bgTertiary\",\"bgTertiary\"),\n    bgFloating:getVal(\"bgFloating\",\"bgFloating\"),\n    bgNested:getVal(\"bgNested\",\"bgNested\"),\n    cardPrimary:getVal(\"cardPrimary\",\"cardPrimary\"),\n    cardSecondary:getVal(\"cardSecondary\",\"cardSecondary\"),\n    input:getVal(\"input\",\"input\"),\n    success:getVal(\"success\",\"success\"),\n    warning:getVal(\"warning\",\"warning\"),\n    danger:getVal(\"danger\",\"danger\"),\n    ripple:getVal(\"ripple\",\"ripple\"),\n    scrollbar:getVal(\"scrollbar\",\"scrollbar\")\n  };\n\n  // Authors: drop blanks; ensure at least one\n  const authorsRaw = [\n    { name: (document.getElementById(\"a1n\")?.value || \"\").trim(), id: (document.getElementById(\"a1i\")?.value || \"\").trim() },\n    { name: (document.getElementById(\"a2n\")?.value || \"\").trim(), id: (document.getElementById(\"a2i\")?.value || \"\").trim() }\n  ];\n  let authors = authorsRaw.filter(a => a.name && a.id);\n  if (authors.length === 0) authors = [{ name: \"Fizz\", id: \"629700611994157057\" }];\n\n  // === semanticColors (Alpha/Cobalt field set) ===\n  const semanticColors = {\n    ANDROID_RIPPLE: A(P.ripple),\n\n    CHAT_BACKGROUND: A(P.bgPrimary),\n\n    BACKGROUND_ACCENT: A(P.brand),\n    BACKGROUND_FLOATING: A(P.bgFloating),\n    BACKGROUND_MENTIONED: A(\"rgba(114,0,0,0.1)\"),\n    BACKGROUND_MENTIONED_HOVER: A(\"rgba(170,0,0,0.1)\"),\n    BACKGROUND_MESSAGE_HOVER: A(\"#FFFFFF0D\"),\n    BACKGROUND_NESTED_FLOATING: A(P.bgNested),\n    BACKGROUND_MOBILE_PRIMARY: A(P.bgPrimary),\n    BACKGROUND_MOBILE_SECONDARY: A(P.bgSecondary),\n    BACKGROUND_MODIFIER_ACCENT: A(\"#FFFFFF12\"),\n    BACKGROUND_MODIFIER_ACTIVE: A(\"#FFFFFF14\"),\n    BACKGROUND_MODIFIER_HOVER: A(\"#FFFFFF0F\"),\n    BACKGROUND_MODIFIER_SELECTED: A(\"#FFFFFF1A\"),\n    BACKGROUND_PRIMARY: A(P.bgPrimary),\n    BACKGROUND_SECONDARY: A(P.bgSecondary),\n    BACKGROUND_SECONDARY_ALT: A(P.bgAlt),\n    BACKGROUND_TERTIARY: A(P.bgTertiary),\n\n    BG_BASE_PRIMARY: A(P.bgPrimary),\n    BG_BACKDROP: A(\"#000000b2\"),\n    BG_BASE_SECONDARY: A(P.bgSecondary),\n    BG_BASE_TERTIARY: A(P.bgAlt),\n\n    HOME_BACKGROUND: A(P.bgSecondary),\n\n    BORDER_FAINT: A(\"#FFFFFF12\"),\n    BORDER_SUBTLE: A(\"#FFFFFF1c\"),\n    BORDER_STRONG: A(\"#FFFFFF26\"),\n\n    CARD_PRIMARY_BG: A(P.cardPrimary),\n    CARD_SECONDARY_BG: A(P.cardSecondary),\n    CHANNELS_DEFAULT: A(P.textMuted),\n    CHANNEL_ICON: A(P.textMuted),\n    CHANNELTEXTAREA_BACKGROUND: A(P.input),\n\n    EMBED_BACKGROUND: A(P.bgFloating),\n\n    HEADER_PRIMARY: A(P.textNormal),\n    HEADER_SECONDARY: A(P.textMuted),\n\n    INTERACTIVE_ACTIVE: A(P.brand),\n    INTERACTIVE_HOVER: A(P.brandHover),\n    INTERACTIVE_MUTED: A(P.textMuted),\n    INTERACTIVE_NORMAL: A(P.textNormal),\n\n    MENTION_BACKGROUND: A(\"rgba(114,0,0,0.1)\"),\n    MENTION_FOREGROUND: A(P.brand),\n\n    REDESIGN_ACTIVITY_CARD_BACKGROUND: A(P.bgAlt),\n    REDESIGN_ACTIVITY_CARD_BACKGROUND_PRESSED: A(P.bgSecondary),\n    REDESIGN_BUTTON_SECONDARY_ALT_BACKGROUND: A(P.bgAlt),\n    REDESIGN_BUTTON_SECONDARY_BACKGROUND: A(P.bgAlt),\n    REDESIGN_BUTTON_SECONDARY_BORDER: A(\"#FFFFFF1A\"),\n    REDESIGN_BUTTON_DANGER_BACKGROUND: A(P.danger),\n    REDESIGN_CHANNEL_CATEGORY_NAME_TEXT: A(P.textMuted),\n    REDESIGN_CHANNEL_NAME_TEXT: A(P.textNormal),\n    REDESIGN_CHAT_INPUT_BACKGROUND: A(P.input),\n\n    SPOILER_HIDDEN_BACKGROUND: A(\"#000000\"),\n\n    STATUS_DANGER: A(P.danger),\n    STATUS_DANGER_BACKGROUND: A(P.danger),\n    STATUS_DANGER_TEXT: A(P.bgPrimary),\n\n    POLLS_NORMAL_FILL_HOVER: A(P.bgSecondary),\n    POLLS_NORMAL_IMAGE_BACKGROUND: A(P.bgSecondary),\n    POLLS_VICTOR_FILL: A(P.success + \"80\"),\n\n    TEXT_LINK: A(P.brand),\n    TEXT_MUTED: A(P.textMuted),\n    TEXT_NORMAL: A(P.textNormal),\n    TEXT_PRIMARY: A(P.textPrimary),\n    TEXT_SECONDARY: A(P.textSecond),\n\n    BG_MOD_FAINT: A(\"#FFFFFF12\"),\n    KEYBOARD: A(P.bgAlt),\n    BACKGROUND_MODIFIER_ACCEPT: A(P.success + \"33\"),\n    BACKGROUND_MODIFIER_ACCEPT_HOVER: A(P.success + \"4d\"),\n    AUTOMOD_QUEUED_FOR_REVIEW_BACKGROUND: A(P.warning + \"33\"),\n    AUTOMOD_QUEUED_FOR_REVIEW_BACKGROUND_HOVER: A(P.warning + \"4d\"),\n\n    SCROLLBAR_AUTO_THUMB: A(P.scrollbar),\n    SCROLLBAR_AUTO_TRACK: A(\"transparent\"),\n    SCROLLBAR_THIN_THUMB: A(P.scrollbar),\n    SCROLLBAR_THIN_TRACK: A(\"transparent\")\n  };\n\n  // === rawColors (full ramp, PLUM_*, guild boosting) ===\n  const rawColors = {\n    // BLUE fallback ramp\n    BLUE_260:\"#5a76a8\", BLUE_300:\"#5a76a8\", BLUE_330:\"#5a76a8\", BLUE_345:\"#5a76a8\",\n    BLUE_360:\"#5a76a8\", BLUE_400:\"#5a76a8\", BLUE_430:\"#5a76a8\", BLUE_460:\"#5a76a8\",\n    BLUE_500:\"#5a76a8\", BLUE_530:\"#5a76a8\", BLUE_560:\"#5a76a8\", BLUE_600:\"#5a76a8\",\n    BLUE_630:\"#5a76a8\", BLUE_660:\"#5a76a8\", BLUE_700:\"#5a76a8\",\n\n    BLACK_500:\"#000000b2\",\n\n    // BRAND ramp\n    BRAND_200:P.brand, BRAND_260:P.brand, BRAND_300:P.brand, BRAND_330:P.brand,\n    BRAND_345:P.brand, BRAND_360:P.brand, BRAND_400:P.brand, BRAND_430:P.brand,\n    BRAND_460:P.brand, BRAND_500:P.brand, BRAND_530:P.brand, BRAND_560:P.brandHover,\n    BRAND_600:P.brand, BRAND_630:P.brand, BRAND_660:P.brand, BRAND_700:P.brand,\n    BRAND_730:P.textNormal,\n\n    // PLUM placeholders mapped to palette (compat)\n    PLUM_1:P.textNormal,\n    PLUM_3:P.brand,\n    PLUM_4:P.textNormal,\n    PLUM_6:P.textNormal,\n    PLUM_9:P.textMuted,\n    PLUM_10:P.textMuted,\n    PLUM_11:P.textMuted,\n    PLUM_13:P.textMuted,\n    PLUM_15:P.brand,\n    PLUM_16:P.bgSecondary,\n    PLUM_17:P.bgPrimary,\n    PLUM_18:P.bgAlt,\n    PLUM_19:P.bgSecondary,\n    PLUM_20:P.bgPrimary,\n    PLUM_21:P.bgSecondary,\n    PLUM_22:P.bgSecondary,\n    PLUM_24:P.bgPrimary,\n    PLUM_25:P.bgPrimary,\n\n    // PRIMARY full ramp\n    PRIMARY_100:P.textMuted,\n    PRIMARY_200:P.textNormal,\n    PRIMARY_300:P.brand,\n    PRIMARY_330:P.textNormal,\n    PRIMARY_360:P.brand,\n    PRIMARY_400:P.brandHover,\n    PRIMARY_460:P.bgSecondary,\n    PRIMARY_500:P.brand,\n    PRIMARY_530:P.brand,\n    PRIMARY_600:P.bgPrimary,\n    PRIMARY_630:P.bgSecondary,\n    PRIMARY_645:P.bgAlt,\n    PRIMARY_660:P.bgSecondary,\n    PRIMARY_700:P.bgTertiary,\n    PRIMARY_730:P.textMuted,\n    PRIMARY_800:P.cardSecondary,\n\n    // GREEN ramp collapsed to success\n    GREEN_260:P.success, GREEN_300:P.success, GREEN_330:P.success, GREEN_345:P.success,\n    GREEN_360:P.success, GREEN_400:P.success, GREEN_430:P.success, GREEN_460:P.success,\n    GREEN_500:P.success, GREEN_530:P.success, GREEN_560:P.success, GREEN_600:P.success,\n    GREEN_630:P.success, GREEN_660:P.success, GREEN_700:P.success,\n\n    // Guild boosting\n    GUILD_BOOSTING_PINK:P.brand,\n    GUILD_BOOSTING_PURPLE:P.brand,\n    GUILD_BOOSTING_PURPLE_FOR_GRADIENTS:P.brand,\n\n    // RED ramp\n    RED_260:P.danger, RED_300:P.danger, RED_330:P.danger, RED_345:P.danger,\n    RED_360:P.danger, RED_400:P.danger, RED_430:P.danger, RED_460:P.danger,\n    RED_500:P.danger, RED_530:P.danger, RED_560:P.danger, RED_600:P.danger,\n    RED_630:P.danger, RED_660:P.danger, RED_700:P.danger,\n\n    // ORANGE/YELLOW ramps mapped to warning\n    ORANGE_260:P.warning, ORANGE_300:P.warning, ORANGE_330:P.warning, ORANGE_345:P.warning,\n    ORANGE_360:P.warning, ORANGE_400:P.warning, ORANGE_430:P.warning, ORANGE_460:P.warning,\n    ORANGE_500:P.warning, ORANGE_530:P.warning, ORANGE_560:P.warning, ORANGE_600:P.warning,\n    ORANGE_630:P.warning, ORANGE_660:P.warning, ORANGE_700:P.warning,\n\n    YELLOW_260:P.warning, YELLOW_300:P.warning, YELLOW_330:P.warning, YELLOW_345:P.warning,\n    YELLOW_360:P.warning, YELLOW_400:P.warning, YELLOW_430:P.warning, YELLOW_460:P.warning,\n    YELLOW_500:P.warning, YELLOW_530:P.warning, YELLOW_560:P.warning, YELLOW_600:P.warning,\n    YELLOW_630:P.warning, YELLOW_660:P.warning, YELLOW_700:P.warning,\n\n    WHITE_500:P.textNormal,\n    WHITE_630:P.textMuted,\n\n    ROLE_DEFAULT:P.textMuted\n  };\n\n  const obj = {\n    name: getVal(\"name\",\"name\"),\n    description: getVal(\"desc\",\"description\"),\n    version: getVal(\"ver\",\"version\"),\n    authors,\n    semanticColors,\n    rawColors,\n    plus: {\n      version: \"0\",\n      iconPack: getVal(\"iconPack\",\"iconPack\"),\n      mentionLineColor: DEFAULTS.mentionLine\n    },\n    spec: 2\n  };\n\n  const out = document.getElementById(\"jsonOut\");\n  if (out) out.value = JSON.stringify(obj, null, 2);\n}\n\n// Controls\ndocument.getElementById(\"copyJson\").addEventListener(\"click\", ()=>{\n  const ta = document.getElementById(\"jsonOut\");\n  if (!ta) return;\n  ta.select(); document.execCommand(\"copy\");\n  const btn = document.getElementById(\"copyJson\"); btn.textContent=\"Copied!\"; setTimeout(()=>btn.textContent=\"Copy JSON\",1200);\n});\ndocument.getElementById(\"downloadJson\").addEventListener(\"click\", ()=>{\n  const ta = document.getElementById(\"jsonOut\"); if (!ta) return;\n  const blob = new Blob([ta.value], {type:\"application/json\"});\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url; a.download = (getVal(\"name\",\"name\") || \"theme\") + \".json\";\n  document.body.appendChild(a); a.click();\n  setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 0);\n});\n// Removed the \"openJson\" button and its functionality\n// document.getElementById(\"openJson\").addEventListener(\"click\", ()=>{\n//   const ta = document.getElementById(\"jsonOut\"); if (!ta) return;\n//   const data = \"data:application/json;charset=utf-8,\" + encodeURIComponent(ta.value);\n//   window.open(data, \"_blank\");\n// });\n\n\n// Init\napplyVars(); // Initial application of variables and JSON generation\n</script>\n</body>\n</html>`;\n\n  return new Response(htmlContent, {\n    headers: {\n      \"Content-Type\": \"text/html;charset=UTF-8\",\n    },\n  });\n}\n", "import { Router } from \"itty-router\";\nimport {\n  showHomePage,\n  showSubmitForm,\n  handleThemeSubmission,\n  showThemeDetails,\n  downloadThemeJSON,\n} from \"./handlers/public.js\";\n\nimport {\n  showAdminLoginPage,\n  handleAdminLogin,\n  showAdminDashboard,\n  showPendingThemes,\n  showApprovedThemes,\n  approveTheme,\n  rejectTheme,\n  deleteTheme,\n  handleAdminLogout,\n} from \"./handlers/admin.js\";\n\nimport { requireAuth, isAdminAuthenticated } from \"./handlers/auth.js\";\nimport { showBuildingPage } from \"./handlers/build.js\";\n\nconst router = Router();\n\n// Public routes\nrouter.get(\"/\", (request, env) => showHomePage(request, env));\nrouter.get(\"/submit\", (request, env) => showSubmitForm(request, env));\nrouter.post(\"/submit\", handleThemeSubmission);\nrouter.get(\"/theme/:id\", (request, env) => showThemeDetails(request, env));\nrouter.get(\"/theme/:id.json\", (request, env) =>\n  downloadThemeJSON(request, env),\n);\nrouter.get(\"/download/:id\", (request, env) => downloadThemeJSON(request, env));\nrouter.get(\"/build\", (request, env) => showBuildingPage(request, env));\n\n// Admin authentication routes\nrouter.get(\"/admin/login\", showAdminLoginPage);\nrouter.post(\"/admin/login\", handleAdminLogin);\nrouter.post(\"/admin/logout\", handleAdminLogout);\n\n// Protected admin routes\nrouter.get(\"/admin/dashboard\", requireAuth, showAdminDashboard);\nrouter.get(\"/admin/pending\", requireAuth, showPendingThemes);\nrouter.get(\"/admin/approved\", requireAuth, showApprovedThemes);\nrouter.post(\"/admin/approve/:id\", requireAuth, approveTheme);\nrouter.post(\"/admin/reject/:id\", requireAuth, rejectTheme);\nrouter.post(\"/admin/delete/:id\", requireAuth, deleteTheme);\n\n// 404 handler\nrouter.all(\"*\", () => new Response(\"Not Found\", { status: 404 }));\n\nexport default {\n  async fetch(request, env, ctx) {\n    request.env = env;\n\n    return router.handle(request, env, ctx).catch((err) => {\n      console.error(\"Application Error:\", err);\n      return new Response(\"Internal Server Error\", { status: 500 });\n    });\n  },\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/src/index.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/src/index.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/.wrangler/tmp/bundle-dWNqiD/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/.wrangler/tmp/bundle-dWNqiD/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/home/kmmiio99o/Documents/GitHub/theme-marketplace-website/.wrangler/tmp/bundle-dWNqiD/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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A;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA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",
  "names": ["Router", "base", "routes", "other", "__proto__", "Proxy", "get", "target", "prop", "receiver", "path", "fetch", "route", "handlers", "push", "toUpperCase", "RegExp", "replace", "async", "request", "args", "response", "match", "url", "URL", "query", "k", "v", "searchParams", "concat", "method", "regex", "pathname", "params", "groups", "handler", "proxy", "createResponse", "format", "transform", "body", "headers", "rest", "constructor", "name", "Response", "entries", "Object", "fromEntries", "json", "JSON", "stringify", "text", "createResponse", "String", "html", "jpeg", "png", "webp", "headers", "i", "branch", "baseUrl", "e", "i", "e", "e"]
}
